<html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>TOF CAMERA</title>
    <meta http-equiv="expires" content="timestamp">
    <LINK rel="SHORTCUT ICON"  href="https://www.brycen.co.jp/wp-content/themes/brycen/img/favicon.ico" />
    <script src="{{url_for('static',filename='js/jquery.js')}}" type="text/javascript"></script>
    <script src="{{url_for('static',filename='js/lang.js')}}" type="text/javascript"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="../static/css/imageviewer.css" rel="stylesheet" type="text/css" />
    <link href="../static/css/imageviewerss.css" rel="stylesheet" type="text/css" />
    <script src="../static/js/imageviewer.js"></script> 
    <script src="../static/js/imageviewerss.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
  </head>
<script>

    /* Variables Global  */
        var submit = 'null';
        var load_colors = 'null';

        var name = null;
        var name_remove = null;
        var self_insert = null;
        var self_delete = null;
        var number_option;

        var flg_record_web = null;  
        var disable_download = false;
        var flg_record;
        var user_name;
        var user;
        var vns = true;

        var mode_zoom = 'btn_video';
        var show_snap_view = false;
        var user_name_record;     
        var infor_recording_other_user;   
        var self_record = false;
        var icon_btn_rc_show_hide;
        var both_ir_depth_btn_press = null;
        var btn_download_press = false;
        var hover_my = false;
        var hover_hang2 = false;
        var mouse_hover_depth = false;
        var mouse_hover_ir = false;
        var hover_slider_zoom = false;

        var aa = 0; //bien dem de chuyen mode khi hinh anh tra ve thay doi kich thuoc giua 1280x480 & 640x480
        var disabled_btn_return = false; // Disabled btn_return khi đang Apply loading o mode show_snap_view tranh gay ra loi
        var toIRorDEPTH = false; // khi o che do show_snap_view Apply ve mode DEPTH or IR (xu li nut btn_Return)

        var flg_unity_control = false
        var flg_unity_control_web = false
    /* End Variables Global */

    /* Function program*/
       
        function both_depthir(){
            console.log('both_depthir')
            $('#my1,#my2').remove();
            $('#btn_ir').removeAttr('style').removeAttr('disabled');
            $('#btn_depth').removeAttr('style').removeAttr('disabled');                

            /* Xoa va tao lai the my2 */            
            var xx = document.createElement("div");        
            xx.setAttribute("id",'hang2');
            xx.setAttribute("class",'hang1 hang2');
            document.getElementById("my").appendChild(xx);

            var yy = document.createElement("img");
            //yy.setAttribute("src",'{{url_for("static",filename="img/mode_ir.jpg")}}');
            //yy.setAttribute("src","../static/ready.jpg");
            yy.setAttribute("src","{{ url_for('video_feed') }}");
            yy.setAttribute("id",'my_video_2_ao');
            document.getElementById("hang2").appendChild(yy);

            setTimeout(function(){            
                /* Xoa va tao lai the my1 */
                var x = document.createElement("div");        
                x.setAttribute("id",'hang1');
                x.setAttribute("class",'hang1');
                document.getElementById("my").appendChild(x);

                var y = document.createElement("img");
                y.setAttribute("src","{{ url_for('video_feed_3') }}");
                //y.setAttribute("src","../static/ready.jpg");
                y.setAttribute("id",'frame_my_video_ao');
                document.getElementById("hang1").appendChild(y);
                
            },50)
            /* Khong su dung Zoom va Fullscreen */
            $('#scale_zoom_s').remove();
            $('.control_bar').css('z-index','-999')
            try {
                stopTimeout();  
            }
            catch(err) {                    
            }             
        }

        function initComparisons() {   
            console.log('initComparisons')     
            var x, i;
            /*find all elements with an "overlay" class:*/
            x = document.getElementsByClassName("hang2");
            for (i = 0; i < x.length; i++) {
                compareImages(x[i]);
            }

            function compareImages(img) {
                var slider, img, clicked = 0, w, h;                
                w = img.offsetWidth;
                h = img.offsetHeight;                
                img.style.width = (w / 2) + "px";                
                slider = document.createElement("img");
                //slider = document.createElement("div");
                slider.setAttribute("class", "img-comp-slider");      
                slider.setAttribute("src", "../static/img/between5.png");         
                img.parentElement.insertBefore(slider, img);                
                slider.style.top = (h / 2) - (slider.offsetHeight / 2) + "px";
                slider.style.left = (w / 2) - (slider.offsetWidth / 2) + "px";                
                slider.addEventListener("mousedown", slideReady);                
                window.addEventListener("mouseup", slideFinish);                
                slider.addEventListener("touchstart", slideReady);                
                window.addEventListener("touchstop", slideFinish);

                function slideReady(e) {                
                    e.preventDefault();                
                    clicked = 1;                
                    window.addEventListener("mousemove", slideMove);
                    window.addEventListener("touchmove", slideMove);
                }

                function slideFinish() {                
                    clicked = 0;
                }

                function slideMove(e) {
                    var pos;                
                    if (clicked == 0) return false;                
                    pos = getCursorPos(e)                
                    if (pos < 0) pos = 0 + 20;
                    if (pos > w) pos = w - 20;                
                    slide(pos);
                }
                
                function getCursorPos(e) {
                    var a, x = 0;
                    e = e || window.event;                
                    a = img.getBoundingClientRect();                
                    x = e.pageX - a.left;                
                    x = x - window.pageXOffset;  
                    return x;
                }

                function slide(x) {                
                    img.style.width = x + "px";                
                    slider.style.left = img.offsetWidth - (slider.offsetWidth / 2);        
                    /*if(x == 640){
                        document.getElementById('btn_ir').click();                    
                    }
                    if(x == 0){
                        document.getElementById('btn_depth').click();                    
                    } */       
                }
            }
        }        

        function refresh_video_feed(){
            //$('#my2').css('display', 'none');
            //$('#my1').removeAttr('style');     
            $('#my1,#my2').remove();
            var x = document.createElement("div");        
            x.setAttribute("id",'my1');
            document.getElementById("my").appendChild(x);

            var y = document.createElement("img");
            y.setAttribute("src","{{ url_for('video_feed') }}");
            y.setAttribute("id",'my_video');
            document.getElementById("my1").appendChild(y);
            //ImageViewer($('#my_video'), {});  
      
            var viewer = ImageViewer($('#my_video'), {});      
            window.viewer = viewer;                                                           
        }

        function refresh_video_feed_2(){
            //$('#my1').css('display', 'none');
            //$('#my2').removeAttr('style');                      
            $('#my2,#my1').remove();
            var x = document.createElement("div");        
            x.setAttribute("id",'my2');
            document.getElementById("my").appendChild(x);

            var y = document.createElement("img");
            y.setAttribute("src","{{ url_for('video_feed_3') }}");
            y.setAttribute("id",'my_video_2');
            document.getElementById("my2").appendChild(y);
            var viewer = ImageViewer($('#my_video_2'), {});
            window.viewer = viewer;     
        }

        function save_as_profile(){
            if($('.language').val() == 'en'){
                $('#add_profile').html('<input id="name_file_s" autocomplete="off" type="text" placeholder="Filename" maxlength = "10" autocomplete="off" /><img id="insert_option_s" src="../static/img/save_as_profile.png" onclick="add_profile()" />');
            }else if($('.language').val() == 'vn'){
                $('#add_profile').html('<input id="name_file_s" autocomplete="off" type="text" placeholder="Tên gợi nhớ" maxlength = "10" autocomplete="off" /><img id="insert_option_s" src="../static/img/save_as_profile.png" onclick="add_profile()" />');
            }else{
                $('#add_profile').html('<input id="name_file_s" autocomplete="off" type="text" placeholder="ファイル名" maxlength = "10" autocomplete="off" /><img id="insert_option_s" src="../static/img/save_as_profile.png" onclick="add_profile()" />');
            }
            
            document.getElementById('name_file_s').focus();
            $("#name_file_s").keyup(function(event) {
                if (event.keyCode === 13) {
                    add_profile();
                }
            });
        };

        function add_profile(){
            var length_li_a = $('li').length;       
            var name_li = $('#name_file_s').val();
            $('.setup_name_file_s').val(name_li);
            var name = $('.setup_name_file_s').val();
            console.log('btn insert option');
            var characters = ['1','2','3','4','5','6','7','8','9','0',
                                'q','w','e','r','t','y','u','i','o','p','a','s','d','f','g','h','j','k','l','z','x','c','v','b','n','m',
                                'Q','W','E','R','T','Y','U','I','O','P','A','S','D','F','G','H','J','K','L','Z','X','C','V','B','N','M'];
            var i;
            for(i=0; i < name.length; i++){                                       
                var element = name.slice(i,i+1);                                        
                var check_space = characters.indexOf(element);  
                if(check_space == -1){                            
                    if($('.language').val() == 'en'){
                        alert('Filename must use characters a-z A-Z and 0-9 !!!');
                    }else if($('.language').val() == 'vn'){
                        alert('Tên gợi nhớ phải sử dụng các ký tự từ a-z hoặc A-Z và 0-9 !!!');
                    }else{
                        alert('ファイル名には、a〜z A〜Z および 0〜9 の文字を使用する必要があります !!!'); 
                    }              
                    return false;
                }                      
            }    
            if(length_li_a >= 5){
                if($('.language').val() == 'en'){
                    alert('Maximum number of options is 4 !!!');
                }else if($('.language').val() == 'vn'){
                    alert('Số lượng tệp tùy chọn tối đa là 4 !!!');
                }else{
                    alert('オプションの最大数は4です!!!');
                }     
                return false;
            }         
            /////////////////////////////////////////
            var i;
            for(i=1; i <= length_li_a; i++){
                var text_li = $('li:nth-child(' + i +')').text();
                var name_file = $('.setup_name_file_s').val();
                if(text_li == name_file | name_file ==''){
                    if($('.language').val() == 'en'){
                        alert('File name already exists. Try again !!!'); 
                    }else if($('.language').val() == 'vn'){
                        alert('Tên gợi nhớ đã tồn tại. Vui lòng thử lại !!!');
                    }else{
                        alert('ファイル名はすでに存在します !!!');
                    }                                                                                             
                    return false;
                }
            }
           
            $('#option_abc').remove();
            
            $('#insert').append("<li id='option_"+ name_li +"'><span id='btn_"+ name_li + "' title=' ' onClick='reply_click(this.id)' style='cursor:pointer;width:110px;display:inline-block'>" + name_li + "</span><img id='"+ name_li +"'src='../static/img/icon_delete.png' onclick='btn_remove(this.id)' style='height:15px;cursor:pointer;float:right;margin-top:2px;margin-right:3px'/></li>");          
            $('.number_option').val(length_li_a)
            $.ajax({
                type : 'POST',
                url : '/insert_option_s',
                data : $('.form-disable').serialize(), 
            }).done(function(data){
                $('#name_file_s').val(''); 
                self_insert = data.data['self_insert'];  
                if($('.language').val() == 'en'){
                    $('#add_profile').html("<span class='title_add_file_en' onClick='save_as_profile()'>Save as profile</span><img class='img_add_file' src='../static/img/save_as_profile.png' onClick='save_as_profile()'/>");    
                }else if($('.language').val() == 'vn'){
                    $('#add_profile').html("<span class='title_add_file_vn' onClick='save_as_profile()'>Ghi nhớ</span><img class='img_add_file' src='../static/img/save_as_profile.png' onClick='save_as_profile()'/>");    
                }else{
                    $('#add_profile').html("<span class='title_add_file_jp' onClick='save_as_profile()'>ファイルとして保存</span><img class='img_add_file' src='../static/img/save_as_profile.png' onClick='save_as_profile()'/>");
                }
            })
        }   

        function apply_button_anable(){
            $('#submit').css('background','#7BBE35');  
                if ($('.language').val()=='en'){
                    $('#submit').val('APPLY');
                    $('#bell').show();
                }else if($('.language').val()=='vn'){
                    $('#submit').val('GỬI');
                    $('#bell').show();
                }else{
                    $('#submit').val('適用');
                    $('#bell').show();
                }    
            $('#submit').removeAttr('disabled');          
        }

        function apply_button_disable(){
            $('#submit').css('background','#989595');  
                if ($('.language').val()=='en'){
                    $('#submit').val('APPLY');
                    $('#bell').hide();
                }else if($('.language').val()=='vn'){
                    $('#submit').val('GỬI');
                    $('#bell').hide();
                }else{
                     $('#submit').val('適用');
                    $('#bell').hide();
                }
            $('#submit').attr('disabled','disabled');
        }

        function reply_click(clicked_id){
            console.log('Li ---> Click')
            $('#frame').removeClass('open');
            name = $('#' + clicked_id + '').text();                
            setTimeout(function(){
                $('#submit_s').click();
            },50);       
        };

        function btn_remove(clicked_id){
            name_remove = clicked_id;                                             
            $('#option_'+ name_remove +'').remove();            
            if($('li').length == 1){
                $('#insert').append('<li id="option_abc" style="text-align:center">...</li>');
            }
            setTimeout(function(){
                $('#delete_option').click();
            },50);
        };

        function slider_zoom(){
                $('#slider_zoom_ss,#number_zoom_ss').val(100);                
                var slider_zoom = document.getElementById("slider_zoom_ss");
                var output_zoom = document.getElementById("number_zoom_ss");                        
                                
                output_zoom.value = slider_zoom.value;
                                
                slider_zoom.oninput = function() {
                    viewer.zoom(slider_zoom.value);                                         
                    output_zoom.value = this.value;
                    
                    if(show_snap_view){
                        viewerss.zoom(slider_zoom.value); 
                    }
                    
                    //window.viewer = viewer;                                
                }               
                           
        }                
        
        function hover_hang2_depthir(){
            $('#hang2').mouseenter(function(){
                //console.log('Vao')
                hover_hang2 = true;
            })
            $('#hang2').mouseleave(function(){
                //console.log('Ra')
                hover_hang2 = false;
            })
        }


    /* End Function */

    /* Javascript and Jquery */

        $(document).ready(function(){            
            $('#my').mouseenter(function(){                            
                hover_my = true;
                $('.img-comp-slider').css('opacity','0.9');
                $('.control_bar').show();
                if(show_snap_view){
                    $('.control_bar_ir').show();
                }                   
            })

            $('#my').mouseleave(function(){
                hover_my = false;
                $('.control_bar').hide();
                $('.img-comp-slider').css('opacity','0');
                if(show_snap_view){
                    $('.control_bar_ir').hide();
                }                   
            });        

            $('#slider_zoom_ss').mouseenter(function() {
                hover_slider_zoom = true
            })

            $('#slider_zoom_ss').mouseleave(function() {
                hover_slider_zoom = false
                $('.iv-snap-view').hide();
                $('.iv-snap-view-ss').hide();   
            })     
        })

        /* Kiem tra trong qua trinh record */       
        $(document).ready(function(){
            $('#record').attr('disabled','disabled');            
            setInterval(function(){               
                if(flg_record & user == user_name_record){
                    try{
                    //console.log('send app.py')     
                    $.ajax({
                        type : 'POST',
                        url : '/self_record',    
                        data:{
                            viet_nam : vns,
                        }
                    }).done(function(data) {
                        //var max_size = data.data['max_size'];
                        var size_file = data.data['size_file'];
                        //console.log(size_number)
                        if(size_file > size_number){ 
                            if(user_name_record == user){                                               
                                $('#stop_record').click().attr('disabled','disabled');     
                            }                                                                                                  
                        }                       
                        var kq = size_file / 1048576;
                            kq = parseFloat(kq).toFixed(1);                            
                            $('#size_file').val(kq + '(MB)');
                    })
                    }catch(err){
                        console.log(err)
                    }
                }
            },1000); 

            //user_web = $('#user_name').val();
            setTimeout(function () {
                $.ajax({
                    type : 'POST',
                    url : '/check_status_reset',    
                    data:{
                        user_web : $('#user_name').val()
                    }
                }).done(function(data) {
                                      
                })  
            });
        })

        /* Xu li Mode, Colormap, Language*/
        $(document).ready(function(){
            /* Show or Hide nut load Colormap */
            $('.seclect_color').change(function() {
                var mode = $('.mode').val();
                if(mode == "DEPTH" | mode == 'DEPTHIR'){
                    $('#load_color').removeAttr('hidden');
                };                
            });

            /* Enable or Disable phan Colormap theo su thay doi cua Mode*/   
            $('#select_mode').change(function() {
                $('#load_color').attr('hidden','hidden');
                $('.seclect_color').prop('disabled', $(this).val() === 'IR');
                var value = $(this).val();
                var color = $('.option').val();
                if(value == "IR"){
                    $('.seclect_color').css('background','#cccccc');
                    $('#load_color').attr('hidden','hidden');
                    $('#ao').css('z-index','30');               
                }else{                   
                    $('#ao').css('z-index','10');
                    $('.seclect_color').css('background','#ffffff');
                    var mode = $('.mode').val();
                    if(mode == "IR"){
                        $('#load_color').attr('hidden','hidden');
                    }                   
                }
                if(value == 'DEPTHIR'){
                    $(this).css('color','red');
                    $('option').css('color','#000');
                }else{
                    $(this).removeAttr('style');
                }
            }).change();   

            /* Thay doi cac parametert this nut Submit se chuyen trang thai */
            $('#K_FAR_NEAR,.seclect_color,#checkbox1,#checkbox2,#checkbox3,#checkbox4,#select_mode,#myRange_gain,#demo_gain,#myRange_pulse,#demo_pulse,#myRange_coring,#demo_coring,#LOAD_K_NRFI').change(function() {
                apply_button_anable();      
            });   

            /* Phan da ngon ngu: english, vietnam, japanese */
            /* Language japanese */
            $(".contry-ja").click(function(){
                $(".contry-ja").css('background','#000000');
                $(".title_jp").css('color','#fff');
                $(".im_jp").css('z-index','30');
                $('#return_to_main').css('right','125');
                $(".contry-en,.title_en,.im_en,.contry-vn,.title_vn,.im_vn").removeAttr('style');
				/* Show or Hide time */
				$('#datejp').show();
                $('#dateen').hide();
                $('#datevn').hide();
            });
            /* Language English */
            $(".contry-en").click(function(){
                $(".contry-ja,.title_jp,.im_jp,.contry-vn,.title_vn,.im_jvn").removeAttr('style');
                $(".contry-en").css('background','#000000');
                $(".title_en").css('color','#fff');
                $(".im_en").css('z-index','30');
                $('#return_to_main').css('right','155');
                /* Show or Hide time */
				$('#dateen').show();
                $('#datejp').hide();
                $('#datevn').hide();
            });
            /* Language Viet Nam */
            $(".contry-vn").click(function(){
                $(".contry-ja,.title_jp,.im_jp,.contry-en,.title_en,.im_en").removeAttr('style');
                $(".contry-vn").css('background','#000000');
                $(".title_vn").css('color','#fff');
                $(".im_vn").css('z-index','30');
                $('#return_to_main').css('right','190');
                /* Show or Hide time */
				$('#dateen').hide();
                $('#datejp').hide();
                $('#datevn').show();

                /* Dieu chinh CSS cho cac element khi o language == 'vn' */
                $('.title_range,.title_mode').css('width','70px');
                $('.frame_range').css('width','189px');
                $('.test_box').css('left','74');
                $('.frame_mode').css('width','92px');
                $('.option_color,#ao').css('width','93px');
                $('#hang').css('padding-left','0px');
                $('.title').css('width','85px').css('padding-top','1px').css('border','1px solid #fff');
                $('.temperature_number').css('width','185px').css('left','30px');
                $('.banner-bottom').css('width','300px');
                $('.user').css('width','200px'); 
                $('#html').css('left','-15');    
                $('.select_mode,#hang,#ao').css('font-size','14px'); 
                $('.select_mode').css('padding-left','2px')        
            });

           
        });

        /* Gan gia tri number thay doi theo Slider */
        $(document).ready(function(){          
            var slider = document.getElementById("myRange_pulse");
            var output = document.getElementById("demo_pulse");
                output.value = slider.value;

                slider.oninput = function() {
                    output.value = this.value;
                }
                output.oninput = function() {
                    slider.value = this.value;
                };
        });

        /* Gan gia tri number thay doi theo Slider */
        $(document).ready(function(){            
            var slider = document.getElementById("myRange_gain");
            var output = document.getElementById("demo_gain");
                output.value = slider.value;

                slider.oninput = function() {
                    output.value = this.value;
                }
                output.oninput = function() {
                    slider.value = this.value;
                };
        });

        /* Gan gia tri number thay doi theo Slider */
        $(document).ready(function(){            
            var slider = document.getElementById("myRange_coring");
            var output = document.getElementById("demo_coring");
                output.value = slider.value;

                slider.oninput = function() {
                    output.value = this.value;
                }
                output.oninput = function() {
                    slider.value = this.value;
                };
        });

        /* Xu li Submit, load temperature, load colormap */
        $(document).ready(function() {       
            $('#submit').click(function(event) {                       
                console.log('Submit !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!');
                aa = 0;          
                if(show_snap_view & !flg_unity_control){
                    //console.log('Apply mo rong')                               
                    disabled_btn_return = true;                    
                    var x = document.createElement("img");
                    x.setAttribute("src","../static/ready.jpg");
                    x.setAttribute("class",'loading_apply_show');
                    document.getElementById("my1").appendChild(x);
                    var y = document.createElement("img");
                    y.setAttribute("src","../static/ready.jpg");
                    y.setAttribute("class",'loading_apply_show');
                    document.getElementById("my2").appendChild(y);
                    viewerss.zoom(100);
                    viewer.zoom(100);
                }
                if(!show_snap_view & !flg_unity_control){
                    //console.log('Apply thương')                                    
                    var y = document.createElement("img");
                    y.setAttribute("src","../static/ready.jpg");
                    y.setAttribute("id",'img_loading_apply');
                    document.getElementById("my").appendChild(y);                   
                }
               
                $('#load_color').attr('hidden','hidden');  
                $('.select_range,.select_mode,.seclect_color,#checkbox1,#checkbox2,#checkbox3,#checkbox4,#demo_gain,#myRange_gain,#demo_pulse,#myRange_pulse,#demo_coring,#myRange_coring,#LOAD_K_NRFI,#default_option,#x-button-drop').attr('disabled','disabled');
                $('.select_range,.select_mode,#demo_gain,#demo_pulse,#demo_coring').css('background','none');              
                $('#submit').attr('disabled','disabled').css('background','#989595');                    
                $(".load_apply").html('<i class="fa fa-spinner fa-spin" style="font-size:20px;color:#989595;position: absolute;"></i>');            
                 
                var lang = $('.language').val();
                if(lang == "en"){
                    $('#submit').val('APPLY ...');
                    $('#bell').hide();
                }else if(lang == 'vn'){
                    $('#submit').val('GỬI ...');
                    $('#bell').hide();
                }else{
                    $('#submit').val('適用 ...');
                    $('#bell').hide();
                }   

                $('#btn_ir,#btn_depth,#divide_screen').attr('disabled','disabled');
                $('#sys_working').hide();                   
                                                                                                                 
                $.ajax({
                    //data : $('.form-disable').serialize(),               
                    type : 'POST',
                    url : '/ajax',
                    data:{
                        K_Mode : $('.select_mode').val(),
                        K_LD1 : $('#checkbox1').is(":checked"),
                        K_LD2 : $('#checkbox2').is(":checked"),
                        K_LD3 : $('#checkbox3').is(":checked"),
                        K_LD4 : $('#checkbox4').is(":checked"),
                        K_PULSE : $('#myRange_pulse').val(),
                        K_GAIN : $('#myRange_gain').val(),
                        K_FAR_NEAR : $('.select_range').val(),
                        K_NRFI : $('#LOAD_K_NRFI').is(":checked"),
                        K_Threthold : $('#myRange_coring').val(),
                        color : $('.seclect_color').val(),
                        user_name : $('#user_name').val(),
                    },
                    success: function(){
                        console.log('Finish');            
                    } ,
                    statusCode: {
                        400: function() {
                        alert('400 status code! user error');
                        },
                        500: function() {
                        alert('500 status code! server error');
                        },
                        200: function() {
                            console.log('200 status code!');
                        },
                        404: function() {
                            alert('404 status code! server error');
                        },
                    },
                })
                .done(function(data,statusCode){                    
                        aa = 0;
                        K_Mode = data.data['K_Mode'];
                
                        var flg_thread_status_submit = data.data['flg_thread_status_submit']  
                                             
                        if(flg_thread_status_submit == 'self'){
                            if(K_Mode != "DEPTHIR"){
                                disabled_btn_return = false;                                
                            }                        
                            $('#sys_working').show()
            
                            setTimeout(function(){
                                $('#sys_working').hide();
                            },2000)
                            apply_button_disable();
                            $(".load_apply").html(' ');
                            
                            return false;
                        }else{
                            $('.mode').val(K_Mode);                                                       
                            if(show_snap_view & K_Mode != 'DEPTHIR'){
                                toIRorDEPTH = true; //disabled #divide_screen
                                disabled_btn_return = false;                              
                                $('#return_to_main').click();
                                $('#divide_screen,#btn_depth,#btn_ir').removeAttr('style').attr('disabled','disabled');
                                $('#my1,#my2').remove();                               
                            }   
                        }

                        $('.scale_zoom').hide();
                        $('#load_color').attr('hidden','hidden');                        
                                                                      
                        var temp = data.data['temp'];
                        if(temp == "operating"){
                            if(lang == "jp")
                                $('.temperature_number').val('作動中');
                            else if(lang == 'vn')
                                $('.temperature_number').val('Đang hoạt động');
                            else 
                                $('.temperature_number').val(temp);
                        }else{
                            $('.temperature_number').val(temp);
                        }   
                                
                        if(K_Mode == "IR"){
                            try {
                                stopTimeout();   
                                stopTimeout_mode_ir();       
                                $('#scale_zoom_ir').remove();
                                $('#hang1,#hang2,.img-comp-slider').remove();
                                $('#my1,#my2').remove();
                                $('#scale_zoom_ir').remove();
                            }
                            catch(err) { 
                                console.log(err)                   
                            }  

                            $('#slider_zoom_ss,#number_zoom_ss').val(100); 
                            $('.control_bar').removeAttr('style');
                            
                            var x = document.createElement("div");        
                            x.setAttribute("id",'my1');
                            document.getElementById("my").appendChild(x);

                            var y = document.createElement("img");
                            y.setAttribute("src","{{ url_for('video_feed') }}");
                            y.setAttribute("id",'my_video');
                            document.getElementById("my1").appendChild(y);    
                            ///////////////////////////////////                    
                            both_ir_depth_btn_press = null;
                            $('#load_color').attr('hidden','hidden');
                            $('#btn_ir').removeAttr('style').attr('disabled','disabled').css('background','#A3D272').css('border','1px solid #A3D272');
                            $('#btn_depth').removeAttr('style').attr('disabled','disabled').css('color','#A0A0A0').css('border','1px solid #F0F0F0').css('box-shadow','none'); 
                            $('#divide_screen').removeAttr('style').attr('disabled','disabled');
                            $('#extend_mode').css('opacity','0.5');                                  
                                   
                            var viewer = ImageViewer($('#my_video'), {});      
                            window.viewer = viewer;        

                            $('#slider_zoom_ss,#number_zoom_ss').val(100);                
                            var slider_zoom = document.getElementById("slider_zoom_ss");
                            var output_zoom = document.getElementById("number_zoom_ss");                        

                            output_zoom.value = slider_zoom.value;
                                            
                            slider_zoom.oninput = function() {
                                viewer.zoom(slider_zoom.value);                                         
                                output_zoom.value = this.value;
                                
                                if(show_snap_view){
                                    viewerss.zoom(slider_zoom.value); 
                                }                                                                                            
                            }   

                            setTimeout(function(){
                                $('#my_video').attr('src','../static/ready.jpg');
                            },2000)                             
                        }else if(K_Mode == "DEPTH"){
                            try {
                                stopTimeout();   
                                stopTimeout_mode_ir();       
                                $('#scale_zoom_ir').remove();
                                $('#hang1,#hang2,.img-comp-slider').remove();
                                $('#my1,#my2').remove();
                                $('#scale_zoom_ir').remove();
                            }
                            catch(err) { 
                                console.log(err)                   
                            }  

                            $('#slider_zoom_ss,#number_zoom_ss').val(100); 
                            $('.control_bar').removeAttr('style');
                            
                            var x = document.createElement("div");        
                            x.setAttribute("id",'my1');
                            document.getElementById("my").appendChild(x);

                            var y = document.createElement("img");
                            y.setAttribute("src","{{ url_for('video_feed') }}");
                            y.setAttribute("id",'my_video');
                            document.getElementById("my1").appendChild(y);     
                            //////////////////////////////////////////////                    
                            both_ir_depth_btn_press = null;
                            $('#btn_depth').removeAttr('style').attr('disabled','disabled').css('background','#A3D272').css('border','1px solid #A3D272');
                            $('#btn_ir').removeAttr('style').attr('disabled','disabled').css('color','#A0A0A0').css('border','1px solid #F0F0F0');  
                            $('#divide_screen').removeAttr('style').attr('disabled','disabled');        
                            $('#extend_mode').css('opacity','0.5');

                            var viewer = ImageViewer($('#my_video'), {});      
                            window.viewer = viewer;  

                            $('#slider_zoom_ss,#number_zoom_ss').val(100);                
                            var slider_zoom = document.getElementById("slider_zoom_ss");
                            var output_zoom = document.getElementById("number_zoom_ss");                        
                                            
                            output_zoom.value = slider_zoom.value;
                                            
                            slider_zoom.oninput = function() {
                                viewer.zoom(slider_zoom.value);                                         
                                output_zoom.value = this.value;
                                
                                if(show_snap_view){
                                    viewerss.zoom(slider_zoom.value); 
                                }                                                                                            
                            }   
                            setTimeout(function(){
                                $('#my_video').attr('src','../static/ready.jpg');
                            },2000)     
                        } 

                        if(K_Mode == "IR" | K_Mode == "DEPTH"){
                            /* Gan Fullscreen cho my1 */                            
                            elem = document.getElementById('my1');
                            mode_zoom = 'btn_video';

                            /*Creat zoom after submit*/
                            $('#scale_zoom_s').remove();
                            var add_zoom_depth = document.createElement('div');
                            add_zoom_depth.setAttribute("id",'scale_zoom_s');
                            add_zoom_depth.setAttribute("class",'scale_zoom');
                            add_zoom_depth.innerHTML = 100 + '%';
                            document.getElementById("my1").appendChild(add_zoom_depth);   
                            //$('.scale_zoom').hide(); 
                            try {
                                stopTimeout();           
                            }
                            catch(err) {                    
                            }  
                            setTimeout(function(){
                                startTimeout();
                                $('#img_loading_apply').remove();
                            },100)
                                                 
                        }                                                                                                               

                        if(K_Mode == "DEPTHIR" & !show_snap_view){
                                 
                            try {
                                stopTimeout();   
                                stopTimeout_mode_ir();       
                                $('#scale_zoom_ir').remove();
                                $('#hang1,#hang2,.img-comp-slider').remove();
                                $('#my1,#my2').remove();
                                $('#scale_zoom_ir').remove();
                            }
                            catch(err) { 
                                console.log(err)                   
                            }  

                            $('#slider_zoom_ss,#number_zoom_ss').val(100); 
                            $('.control_bar').removeAttr('style');
                            ///////                            
                            both_ir_depth_btn_press = 'both';
                            $('#extend_mode').show();
                            $('#extend_mode').css('opacity','1');
                            $('#btn_depth').removeAttr('style').removeAttr('disabled');
                            $('#btn_ir').removeAttr('style').removeAttr('disabled'); 
                            $('#divide_screen').removeAttr('style').attr('disabled','disabled').css('background','#A3D272');

                            $('#divide_screen').show();                            

                            /* Xoa my1, my2 tao lai hang1, hang2 va xoa zoom */
                            both_depthir();                                                         

                            setTimeout(function(){
                                var viewer = ImageViewer($('#frame_my_video_ao'), {});      
                                window.viewer = viewer;      
                                
                                setTimeout(function(){                                
                                    var viewerss = ImageViewerss($('#my_video_2_ao'), {});      
                                    window.viewerss = viewerss; 
                                
                                    var slider_zoom = document.getElementById("slider_zoom_ss");
                                    var output_zoom = document.getElementById("number_zoom_ss");                        
                                                    
                                    output_zoom.value = slider_zoom.value;     
                                    slider_zoom.oninput = function() {
                                        viewer.zoom(slider_zoom.value);                                         
                                        output_zoom.value = this.value;                                                                
                                        viewerss.zoom(slider_zoom.value);                                                          
                                    }
                                },100)
                            },200)
                            
                            /* Tao lai gai tri hien thi % Zoom hang2 */       
                            setTimeout(function(){
                                var add_zoom_ir = document.createElement('div');
                                add_zoom_ir.setAttribute("id",'scale_zoom_ir');
                                add_zoom_ir.setAttribute("class",'scale_zoom_ir');
                                add_zoom_ir.innerHTML = 100 + '%';
                                document.getElementById("hang2").appendChild(add_zoom_ir); 
                                $('#scale_zoom_ir').css('z-index','-999').css('opacity','0');
                                startTimeout_mode_ir();
                            },400)      
                            /* Tao lai gai tri hien thi % Zoom hang1 */ 
                            setTimeout(function() {
                                $('#scale_zoom_s').remove();
                                var add_zoom_depth = document.createElement('div');
                                add_zoom_depth.setAttribute("id",'scale_zoom_s');
                                add_zoom_depth.setAttribute("class",'scale_zoom');
                                add_zoom_depth.innerHTML = 100 + '%';
                                document.getElementById("hang1").appendChild(add_zoom_depth); 
                                $('#scale_zoom_s').css('z-index','-999').css('opacity','0');
                                startTimeout();  
                            },500)
                                                                                                         
                            /* Chay thuoc tinh divide */
                            setTimeout(function(){                                
                                initComparisons();
                                $('#img_loading_apply').remove();
                            },600)  
                            
                            setTimeout(function(){                                
                                $('#my_video_2_ao,#frame_my_video_ao').attr('src','../static/ready.jpg')
                            },1500)
                                                                                                                                                                                                      
                            hover_hang2_depthir();
                                                           
                            //Mode DEPTHIR --> Disabled Slider Zoom                     
                            $('option[value="IR"]').attr('disabled','disabled').css('background','#ccc'); 
                            $('option[value="DEPTH"]').attr('disabled','disabled').css('background','#ccc');                            
                        }else if(K_Mode == "DEPTHIR" & show_snap_view){
                            $('.loading_apply_show').remove();
                            $('option[value=' + data.data['color'] + ']').prop('selected', true);
                            disabled_btn_return = false;
                        }
                        
                        
                        $(".icon-warning").html('<i id="warning-temp" class="fa fa-warning" style="color:red; display:none"></i>');
                        var LT = data.data['LT'];
                        if(LT >= 80){
                            function flicker(count, callback, current) {
                            current = current || 0;               
                            $("#warning-temp")[current % 2 == 0 ? 'hide' : 'show']();            
                            setTimeout(function(){     
                                flicker(count, callback, current + 1);
                            },1500);
                            }flicker();
                        }else{
                            $(".icon-warning").html('<i class="fa fa-warning" style="color:red;display:none"></i>');        
                        }
                       
                        //Dieu chinh Brightness ve gia tri 0
                        $('#set').hide();
                        $('#exposure').val(0);
                        $('#brightness_number').val(0);                           
                        add_filter();
                        submit = data.data['submit'];
                        $('#reset_counter').mouseenter();

                        //Disabled button Apply after Submit [Button]
                        setTimeout(function(){
                            apply_button_disable();
                            $(".load_apply").html(' ');                           
                            if(flg_thread_status_submit != 'self'){
                                $('.select_range,.select_mode,.seclect_color,#checkbox1,#checkbox2,#checkbox3,#checkbox4,#demo_gain,#myRange_gain,#demo_pulse,#myRange_pulse,#demo_coring,#myRange_coring,#LOAD_K_NRFI,#default_option,#x-button-drop').removeAttr('disabled');
                            }
                        },500)                        

                }).fail(function(){
                    alert('Vui lòng kiểm tra lại hệ thống !!!');      
                    //alert(statusCode);    
                });
                event.preventDefault();
            });

            $("#load_temp").click(function(){
                $('#load_temp').html('<i class="fa fa-spinner fa-spin" style="font-size:19px;color:#989595;position: absolute;top:2;left:3;"></i>');
                $.ajax({
                    type : 'POST',
                    url : '/load_temp',     
                })
                .done(function(data) {
                    $('#load_temp').html('<img width="25px" height="25px" style="color:#989595" src="{{url_for("static",filename="img/load1.png")}}" />');
                    $(".icon-warning").html('<i id="warning-temp" class="fa fa-warning" style="color:red; display:none"></i>');         
                    var LT = data.data['LT'];
                    var temp = data.data['temp'];
                    $('.temperature_number').val(temp);
                
                    if(LT >= 80){
                        function flicker(count, callback, current) {
                        current = current || 0;               
                        $("#warning-temp")[current % 2 == 0 ? 'hide' : 'show']();            
                        setTimeout(function(){     
                            flicker(count, callback, current + 1)
                        }, 1000);
                        }flicker();
                    }else if(LT < 80){
                        $(".icon-warning").html('<i class="fa fa-warning" style="color:red;display:none"></i>');               
                    }
                });
        
            });

            $("#load_color").click(function(event){
                $('#load_color').html('<i class="fa fa-spinner fa-spin" style="font-size:19px;color:#989595;position: absolute;top:2;left:3;"></i>');
                $.ajax({
                    data : {
                        color :  $('.seclect_color').val(),
                        user_name : user,
                    },
                    type : 'POST',
                    url : '/load_color',     
                })
                .done(function(data) {
                    load_colors = data.data['load_colors'];
                    $('#load_color').html('<img width="25px" height="25px" style="color:#989595" src="{{url_for("static",filename="img/load1.png")}}" />');
                    $('#load_color').attr('hidden','hidden');                      
                    $('option[value=' + $('.seclect_color').val() + ']').prop('selected', true);
                    apply_button_disable();                     
                     
                    var K_Mode = data.data['K_Mode'];
                    var K_LD1 = data.data['K_LD1'];
                    var K_LD2 = data.data['K_LD2'];
                    var K_LD3 = data.data['K_LD3'];
                    var K_LD4 = data.data['K_LD4'];
                    var K_PULSE = data.data['K_PULSE'];
                    var K_NRFI = data.data['K_NRFI'];
                    var K_GAIN = data.data['K_GAIN'];
                    var K_FAR_NEAR = data.data['K_FAR_NEAR'];
                    var K_Threthold = data.data['K_Threthold'];
                    var color = data.data['color'];
                    console.log(K_LD1)
                    $('#load_color').attr('hidden','hidden');
                    $('.select_range').val(K_FAR_NEAR);                                        
                    $('.seclect_color').val(color);                     
                                                                        
                    $('#select_mode').val(K_Mode);                    
                    if(K_Mode == "DEPTHIR"){                    
                        $('#select_mode').css('color','red'); 
                        $('#ao').css('z-index','10');  
                        $('.seclect_color').css('background','#ffffff');
                        $('.seclect_color').removeAttr('disabled');
                    }else if(K_Mode == "IR"){
                        $('#ao').css('z-index','30');
                        $('.seclect_color').css('background','#cccccc');
                        $('.seclect_color').attr('disabled','disabled');
                    }else if(K_Mode == "DEPTH"){
                        $('#ao').css('z-index','10');  
                        $('.seclect_color').css('background','#ffffff');
                        $('.seclect_color').removeAttr('disabled');
                    }
                                
                    if(K_LD1 == "checked")                       
                        $('#checkbox1').prop('checked', true);                    
                    else
                        $('#checkbox1').prop('checked', false);   

                    if(K_LD2 == "checked")
                        $('#checkbox2').prop('checked', true);
                    else
                        $('#checkbox2').prop('checked', false);  

                    if(K_LD3 == "checked")
                        $('#checkbox3').prop('checked', true);
                    else
                        $('#checkbox3').prop('checked', false); 

                    if(K_LD4 == "checked")
                        $('#checkbox4').prop('checked', true);
                    else
                        $('#checkbox4').prop('checked', false);
                                        
                    K_GAIN = parseInt(K_GAIN);
                    $('#demo_gain').val(K_GAIN);
                    $('#myRange_gain').val(K_GAIN);
                    K_PULSE = parseInt(K_PULSE);
                    $('#demo_pulse').val(K_PULSE);
                    $('#myRange_pulse').val(K_PULSE);
                    K_Threthold = parseInt(K_Threthold);
                    $('#demo_coring').val(K_Threthold);
                    $('#myRange_coring').val(K_Threthold);
                    if(K_NRFI == "checked")
                        $('#LOAD_K_NRFI').prop('checked', true);
                    else
                        $('#LOAD_K_NRFI').prop('checked', false);       
                                
                    $('#reset_counter').mouseenter();        
                   
                    $('.update_params').mouseenter();

                });
            
            });   
        });

        /* Cap nhat gia tri CPU va load parameters khi dang nhap nhieu nguoi dung */
        $(document).ready(function(){
            var language = $('.language').val();           
            /* Cap nhat gia tri tu Server app.py */
            $('#upload_cpu').hover(function(){
                    $.ajax({
                    type : 'POST',
                    url : '/upload_cpu',     
                })
                .done(function(data) {  
                    /* Unity Control Camera */
                    flg_unity_control = data.data['flg_unity_control'];
                    //console.log(flg_unity_control)                 
                    if(flg_unity_control & !flg_unity_control_web){                        
                        flg_unity_control_web = true;     
                        $('.control_bar,.control_bar_ir').css('z-index','0');                   
                        if(!show_snap_view){    
                            $('#extend_mode').css('display', 'none');                        
                            var y = document.createElement("img");
                            y.setAttribute("src","../static/ready.jpg");
                            y.setAttribute("id",'img_loading_apply');
                            document.getElementById("my").appendChild(y);   
                        }else{
                            disabled_btn_return = true;
                            var x = document.createElement("img");
                            x.setAttribute("src","../static/ready.jpg");
                            x.setAttribute("class",'loading_apply_show');
                            document.getElementById("my1").appendChild(x);
                            var y = document.createElement("img");
                            y.setAttribute("src","../static/ready.jpg");
                            y.setAttribute("class",'loading_apply_show');
                            document.getElementById("my2").appendChild(y);
                            viewerss.zoom(100);
                            viewer.zoom(100);
                        }
                        $('.select_range,.select_mode,.seclect_color,#checkbox1,#checkbox2,#checkbox3,#checkbox4,#demo_gain,#myRange_gain,#demo_pulse,#myRange_pulse,#demo_coring,#myRange_coring,#LOAD_K_NRFI,#default_option,#x-button-drop').attr('disabled','disabled');
                        $('.select_range,.select_mode,#demo_gain,#demo_pulse,#demo_coring').css('background','none');                                      
                        apply_button_disable();              
                        $(".load_apply").html('<i class="fa fa-spinner fa-spin" style="font-size:20px;color:#989595;position: absolute;"></i>');   
                    }else if(!flg_unity_control & flg_unity_control_web){                                                                        
                        flg_unity_control_web = false
               
                        $.ajax({
                            type : 'POST',
                            url : '/load_params',                                 
                        })
                        .done(function(data) {
                            K_Mode = data.data['K_Mode'];
                            //console.log("************************")
                            //console.log(K_Mode)
                            //console.log("************************")
                            try{
                                viewer.zoom(100);
                                viewerss.zoom(100);                                
                            }catch(err) {
                                console.log(err)
                            }
                            if($('.mode').val() == K_Mode){
                                $('#extend_mode').show();    
                                $('.control_bar,.control_bar_ir').css('z-index','20');    
                                $('.loading_apply_show,#img_loading_apply').remove();
                                apply_button_anable();
                                $(".load_apply").html('');
                                $('.update_params').mouseenter();
                                $('.select_range,.select_mode,.seclect_color,#checkbox1,#checkbox2,#checkbox3,#checkbox4,#demo_gain,#myRange_gain,#demo_pulse,#myRange_pulse,#demo_coring,#myRange_coring,#LOAD_K_NRFI,#default_option,#x-button-drop').removeAttr('disabled');
                                disabled_btn_return = false;
                                if(both_ir_depth_btn_press == 'both'){
                                    $('.control_bar,.control_bar_ir').css('z-index','0');
                                }
                            }else{
                                document.getElementById("Reload_page").click();
                            }
                        })
                    }

                    var cpu = data.data['cpu_p'];
                    var fps = data.data['fps'];
                    var mbps = data.data['mbps'];
                    var mbps_pc = data.data['mbps_pc'];
                    var mime = data.data['mime'];
                    var flg_params = data.data['flg_params'];                     

                    user_name_record = data.data['user_name_record']  //setup record
                    user_name = data.data['user_name'];  //setup load_param                  
                    user = $('#user_name').val();  //user login 
                                                     
                    var mode = $('.mode').val()
                    // Setup convert to mode DEPTH-IR when image return web is 1280*480 and convert to mode DEPTH when image return web is 640*480
                    var bbb = data.data['bbb']
                    //console.log(mode)                
                    //console.log(bbb[1])
                    //console.log(aa)
                    //console.log('>>>>>>>>>>')
                    
                    if(mode != "DEPTHIR" & bbb[1] == 1280){
                        aa = aa + 1;                        
                        if(aa > 3){  
                            console.log('convert_mode :::>>> isdepthir')                                                                                                                                                             
                            $.ajax({
                                type : 'POST',
                                url : '/convert_mode',   
                                data:{
                                    convert : "isdepthir",
                                } 
                            }).done(function(data) {                                    
                                //location.reload();                                   
                                document.getElementById("Reload_page").click();
                            })   
                                         
                        }                      
                    }else if(mode == 'DEPTHIR' & bbb[1] == 640){
                        aa = aa + 1;
                        if(aa > 3){                                                              
                            console.log('convert_mode :::>>> isdepth')                                                                                               
                            $.ajax({
                                type : 'POST',
                                url : '/convert_mode',   
                                data:{
                                    convert : "isdepth",
                                } 
                            }).done(function(data) {
                                    //location.reload();
                                document.getElementById("Reload_page").click();
                            })                                                      
                        }
                    }else{
                        aa = 0;
                    }
                                                          
                    /* Record: download khong bi lay nham video cua tai khoan khac --> Hide va Show phan Download */
                    flg_record = data.data['flg_record']
                    var disable_download_app = data.data['disable_download_app'];
                    if(!disable_download & disable_download_app){
                        $('#frame_record,#second,#download,#delete_record,#remove_download,#size_file,#title_size_file,#title_second').hide();
                    }
                    if(!disable_download_app & disable_download){
                        disable_download = false;
                    }                    

                    cpu = cpu.toFixed(2);
                    fps = fps.toFixed(2);
                    mbps = mbps.toFixed(2);
                    mbps_pc = mbps_pc.toFixed(2);

                    /* Show thong so CPU moi giay ra man hinh theo ngon ngu */
                    if(language == 'en'){
                        $('.cpu').val('Streaming video [motion jpeg, ' + fps + ' fps], CPU ' + cpu + '%, Server NIC ' + mbps + 'Mbps');
                    }else if(language == 'vn'){
                        $('.cpu').val('Phát trực tuyến video [chuyển động jpeg, ' + fps + ' fps], CPU ' + cpu + '%, Máy chủ NIC ' + mbps + 'Mbps');
                    }else{
                        $('.cpu').val('ストリーミングビデオ [motion jpeg, ' + fps + ' fps], CPU ' + cpu + '%, サーバ NIC ' + mbps + 'Mbps');
                    }                                                         

                    /* Load lai gia tri khi Submit doi voi cac tai khoan khac dang online cung luc */ 
                    if (flg_params && submit != 'self' && load_colors != 'self'){    //user_name == user 
                        apply_button_disable();                        
                        setTimeout(function(){                                                                                                                        
                            console.log("Load Parameters");                                 
                            $('#load_params').mouseenter();                                                                                                
                        },1000);                                 
                    }; 
                    
                    /* flg_params thanh fasle cho chinh trang web submit */
                    if(flg_params & (submit == 'self' | load_colors == 'self')){
                        setTimeout(function(){
                            $.ajax({
                                type : 'POST',
                                url : '/flg_params_to_false',     
                            }).done(function(data) { 
                                submit = 'null';
                                load_colors = 'null';
                            })   
                        },1000)                       
                    };                                                 

                    //var flg_check_status_reset = data.data['flg_check_status_reset'];                    
                    if(flg_record != flg_record_web){                                          
                        if(flg_record){                          
                            flg_record_web = true;
                        }else{
                            flg_record_web = false;
                        }                                 
                    
                        if(flg_record){
                            if(user == user_name_record){                           
                                $('#size_file,#second,#title_second,#title_size_file').show();
                                second = 0;
                                j = 0;   
                                time = setInterval(function(){                                   
                                    demtime();
                                },1000)  
                                $('#rc1').css('z-index','15');
                                $('#stop_rc1').css('z-index','5');
                                if(self_record){
                                    $('#stop_record').removeAttr('disabled').addClass('recording_btn').removeClass('disable_record_btn').show();
                                    $('#record').attr('disabled','disabled').addClass('disable_record_btn').removeClass('enable_record_btn').hide();
                                }else{
                                    $('#stop_record').removeAttr('disabled').addClass('recording_btn').removeClass('disable_record_btn').hide();
                                    $('#record').attr('disabled','disabled').addClass('disable_record_btn').removeClass('enable_record_btn').show();
                                    $('#infor_record').show();
                                    $('#infor_record').text(user_name_record + ' ' + 'is recording ...'); 
                                    icon_btn_rc_show_hide = setInterval(function() {                                        
                                        $("#rc").css('z-index','20'); 
                                        $('#infor_record').css('opacity','1');
                                        setTimeout(function(){                                                                               
                                            $("#rc").css('z-index','1');
                                            $('#infor_record').css('opacity','0.3');                                        
                                        },1000)
                                    },2000)                                                                        
                                }
                                
                            }else if (user != user_name_record){                                                       
                                $('#infor_record').show();
                                if(user_name_record == null){
                                    $('#infor_record').text('');
                                }else{
                                    $('#infor_record').text(user_name_record + ' ' + 'is recording ...');                                
                                }                                            
                                $('#stop_record,#record').attr('disabled','disabled').removeClass('enable_record_btn').addClass('disable_record_btn');       
                                $('#record').show();
                                $('#stop_record').hide();         
                                $('#rc1').css('z-index','15');
                                $('#stop_rc1').css('z-index','15');
                                /////////////////////////////
                                infor_recording_other_user = setInterval(function(){                                    
                                    //$("#stop_rc").css('z-index','10');
                                    $('#infor_record').css('opacity','1');
                                    $("#rc").css('z-index','20');                                    
                                    setTimeout(function(){
                                        //$("#stop_rc").css('z-index','1');
                                        $('#infor_record').css('opacity','0.3');
                                        $("#rc").css('z-index','1');                                        
                                    },1000)
                                },2000)

                            }         
                        }else{    
                            var name_file_rc_lalala = data.data['name_file_rc']
                            var check_user_name_record = data.data['check_user_name_record']                          
                            try{                                
                                console.log(name_file_rc_lalala.length)
                                if(name_file_rc_lalala.length == 15){
                                    console.log('Load CPU :::')                                 
                                    $('#remove_download').show();                                                                                                 
                                    $('#download').show();                                     
                                    $('#download').attr('href', "/static/" + name_file_rc_lalala + ".avi"); 
                                    $('#download').attr('target','_blank');                                      
                                    $("#delete_record").show(); 

                                    if(user != check_user_name_record){
                                        console.log('After')                                      
                                        $('#size_file,#title_size_file').hide();
                                        $('#second,#title_second').hide();
                                        $('#remove_download').hide();
                                        $('#download').hide();                                             
                                    }
                                }
                            }catch(err){
                                //console.log(err)
                            }
                            
                            
                            self_record = false;                 
                            $('#infor_record').hide();
                            $('#infor_record').text('');
                            $('#record').removeAttr('disabled').removeClass('disable_record_btn').addClass('enable_record_btn').show();
                            $('#stop_record').attr('disabled','disabled').removeClass('recording_btn').addClass('disable_record_btn').hide();
                            $('#rc1').css('z-index','1');
                            $('#rc').css('z-index','20');
                            $('#stop_rc1').css('z-index','15');                            
                            try {
                                clearTimeout(time);
                                clearInterval(icon_show_hide_rc);
                                clearInterval(infor_recording_other_user);
                                clearInterval(icon_btn_rc_show_hide);
                            }
                            catch(err) {     
                                console.log(err)             
                            }
                           
                        }  

                        var flg_check_status_reset = data.data['flg_check_status_reset'];
                        if(flg_check_status_reset){                           
                            $('#loop_user_login').show()
                            setTimeout(function(){
                                $('#loop_user_login').fadeOut(3000);
                            },1000)                            
                            $('#size_file,#title_size_file').hide();
                            $('#second,#title_second').hide();
                            $('#frame_record').hide();
                            $('#download,#delete_record,#remove_download').hide();
                            $.ajax({
                                type : 'POST',
                                url : '/check_status_reset_to_false',    
                            })
                        } 
                    }
                });
            });

            /*--- Load lại các giá trị parameter mới ---*/
            $('#load_params').hover(function(){
                    $.ajax({
                    type : 'POST',
                    url : '/load_params',     
                })
                .done(function(data) {    
                    aa = 0;             
                    console.log('Step 1')
                    var K_Mode = data.data['K_Mode'];
                    var K_LD1 = data.data['K_LD1'];
                    var K_LD2 = data.data['K_LD2'];
                    var K_LD3 = data.data['K_LD3'];
                    var K_LD4 = data.data['K_LD4'];
                    var K_PULSE = data.data['K_PULSE'];
                    var K_NRFI = data.data['K_NRFI'];
                    var K_GAIN = data.data['K_GAIN'];
                    var K_FAR_NEAR = data.data['K_FAR_NEAR'];
                    var K_Threthold = data.data['K_Threthold'];
                    var color = data.data['color'];
                    $('#select_mode').val(K_Mode);
                    console.log($('.mode').val());
                    console.log(K_Mode);
                    
                if($('.mode').val() != K_Mode){     
                    if(K_Mode != 'DEPTHIR' & show_snap_view){
                        document.getElementById("Reload_page").click();                                
                    }      
                    console.log('Step 1111111')                     
                        try{
                            $('#hang1,#hang2,.img-comp-slider').remove();
                            $('#my1,#my2').remove();
                            $('#scale_zoom_ir').remove();
                            stopTimeout();
                            stopTimeout_mode_ir();
                        }catch(err){
                            console.log(err);
                        }                        
                                                                                                                        
                    if(K_Mode == "IR"){  
                        console.log('Step 2')
                        $('#extend_mode').css('opacity','0.5');                                                                
                        $('#ao').css('z-index','30');
                        $('.seclect_color').css('background','#cccccc');
                        $('.seclect_color').attr('disabled','disabled');
                        $('#btn_ir').removeAttr('style').attr('disabled','disabled').css('background','#A3D272').css('border','1px solid #A3D272');
                        $('#btn_depth').removeAttr('style').attr('disabled','disabled').css('color','#A0A0A0').css('border','1px solid #F0F0F0').css('box-shadow','none');                        
                        $('#divide_screen').removeAttr('style').attr('disabled','disabled');
                        $('#select_mode').removeAttr('style');      
                        setTimeout(function(){
                            $('#my_video').attr('src','../static/ready.jpg');
                        },1000)                                                     
                    }else if(K_Mode == "DEPTH"){   
                        console.log('Step 3')                                                                   
                        $('#extend_mode').css('opacity','0.5');                                                                      
                        $('#ao').css('z-index','10');  
                        $('.seclect_color').css('background','#ffffff');
                        $('.seclect_color').removeAttr('disabled');
                        $('#btn_depth').removeAttr('style').attr('disabled','disabled').css('background','#A3D272').css('border','1px solid #A3D272');
                        $('#btn_ir').removeAttr('style').attr('disabled','disabled').css('color','#A0A0A0').css('border','1px solid #F0F0F0');                                               
                        $('#divide_screen').removeAttr('style').attr('disabled','disabled');
                        $('#select_mode').removeAttr('style');  
                        setTimeout(function(){
                            $('#my_video').attr('src','../static/ready.jpg');
                        },1000)                      
                    }  

                    if(K_Mode == "IR" | K_Mode == "DEPTH") { 
                        console.log('Step 4')
                        $('option[value="IR"]').removeAttr('disabled').removeAttr('style'); 
                        $('option[value="DEPTH"]').removeAttr('disabled').removeAttr('style');                        
                        $('#hang1,#hang2').remove();
                        $('.control_bar').removeAttr('style');

                        /* Xoa my1 my2 tao lai my1 */
                        //refresh_video_feed();
                        $('#my1,#my2').remove();
                        var x = document.createElement("div");        
                        x.setAttribute("id",'my1');
                        document.getElementById("my").appendChild(x);

                        var y = document.createElement("img");
                        y.setAttribute("src","{{ url_for('video_feed') }}");
                        y.setAttribute("id",'my_video');
                        document.getElementById("my1").appendChild(y);
                        //ImageViewer($('#my_video'), {});  
                        setTimeout(function(){                        
                            var viewer = ImageViewer($('#my_video'), {});      
                            window.viewer = viewer;  
                            /* Slider Zoom */                     
                            $('#slider_zoom_ss,#number_zoom_ss').val(100);
                            var slider_zoom = document.getElementById("slider_zoom_ss");
                            var output_zoom = document.getElementById("number_zoom_ss");                        
                                            
                            output_zoom.value = slider_zoom.value;
                                            
                            slider_zoom.oninput = function() {
                                viewer.zoom(slider_zoom.value);                                         
                                output_zoom.value = this.value;
                                
                                if(show_snap_view){
                                    viewerss.zoom(slider_zoom.value); 
                                }                                                                                 
                            }
                        },100)
                        /* ---- */

                        elem = document.getElementById('my1');
                        mode_zoom = 'btn_video';
                        $('.img-comp-slider').remove();   

                        /* Xoa va tao lai % Zoom */     
                        $('.img-comp-slider').remove();  
                        $('#scale_zoom_s').remove();
                        var add_zoom_depth = document.createElement('div')
                        add_zoom_depth.setAttribute("id",'scale_zoom_s')
                        add_zoom_depth.setAttribute("class",'scale_zoom')
                        add_zoom_depth.innerHTML = 100 + '%';
                        document.getElementById("my1").appendChild(add_zoom_depth)   
                        try {
                            stopTimeout();  
                        }
                        catch(err) {  
                            console.log(err)                  
                        }  
                        setTimeout(function() {
                            startTimeout();  
                        },300)
                            
                    }           

                    if(K_Mode == "DEPTHIR"){     
                        console.log('Step 5')                       
                        $('#select_mode').css('color','red');                                           
                        $('#ao').css('z-index','10');  
                        $('.seclect_color').css('background','#ffffff');
                        $('.seclect_color').removeAttr('disabled');
                        $('#btn_depth').removeAttr('style').removeAttr('disabled');
                        $('#btn_ir').removeAttr('style').removeAttr('disabled');  
                        $('#divide_screen').removeAttr('style').css('background','#A3D272').attr('disabled','disabled');           
                        $('option').css('color','#000');   

                        if(!show_snap_view){
                            $('#my1,#my2').remove();  
                            $('#hang1,#hang2').remove();
                            $('.img-comp-slider').remove();  
                            try {
                                stopTimeout();  
                                stopTimeout_mode_ir();
                            }
                            catch(err) {  
                                console.log(err)                  
                            }  
                            $('#divide_screen').show(); 
                            $('#extend_mode').css('opacity','1');
                            /* Xoa my1, my2 tao lai hang1, hang2 va xoa zoom */
                            both_depthir();                                                        

                            /* Add zoom cho BOTH */
                            setTimeout(function(){                                
                                var viewer = ImageViewer($('#frame_my_video_ao'), {});      
                                window.viewer = viewer;      

                                setTimeout(function(){
                                    var viewerss = ImageViewerss($('#my_video_2_ao'), {});      
                                    window.viewerss = viewerss; 

                                    var slider_zoom = document.getElementById("slider_zoom_ss");
                                    var output_zoom = document.getElementById("number_zoom_ss");                        
                                                            
                                    output_zoom.value = slider_zoom.value;      

                                    slider_zoom.oninput = function() {
                                        viewer.zoom(slider_zoom.value);                                         
                                        output_zoom.value = this.value;                                                                
                                        viewerss.zoom(slider_zoom.value);                                                          
                                    }
                                },100)
                            },200)
                           
                            setTimeout(function(){
                                $('#scale_zoom_s').remove();
                                var add_zoom_depth = document.createElement('div');
                                add_zoom_depth.setAttribute("id",'scale_zoom_s');
                                add_zoom_depth.setAttribute("class",'scale_zoom');
                                add_zoom_depth.innerHTML = 100 + '%';
                                document.getElementById("hang1").appendChild(add_zoom_depth); 
                                $('#scale_zoom_s').css('z-index','-999').css('opacity','0');
                                startTimeout();  
                            },400)
                                                        
                            setTimeout(function(){
                                var add_zoom_ir = document.createElement('div');
                                add_zoom_ir.setAttribute("id",'scale_zoom_ir');
                                add_zoom_ir.setAttribute("class",'scale_zoom_ir');
                                add_zoom_ir.innerHTML = 100 + '%';
                                document.getElementById("hang2").appendChild(add_zoom_ir);
                                $('#scale_zoom_ir').css('z-index','-999').css('opacity','0'); 
                                startTimeout_mode_ir();
                            },500) 

                            /* Chay thuoc tinh divide */
                            setTimeout(function(){
                                initComparisons();
                            },600) 

                            $('#slider_zoom_ss,#number_zoom_ss').val(100);                                                                                                                                                          
                            hover_hang2_depthir();

                            setTimeout(function(){                                
                                $('#my_video_2_ao,#frame_my_video_ao').attr('src','../static/ready.jpg');
                            },2000)

                            

                            $('option[value="IR"]').attr('disabled','disabled').css('background','#ccc'); 
                            $('option[value="DEPTH"]').attr('disabled','disabled').css('background','#ccc');                   
                        }else{ 
                            console.log('DQH')
                        }                                                      
                    }                                                                             
                }else{       
                    /* Truong hop ngoai le khi load cung mode or nhan Apply button dang ban */       
                    if(K_Mode != 'IR'){
                        console.log('rrrrrrrrrrrrrrrrrrrrrrrrrrrrrr')
                        $('.select_mode').css('color','#000');
                        $('option').css('color','#000');
                        $('#ao').css('z-index','10');  
                        $('.seclect_color').css('background','#ffffff');
                        $('.seclect_color').removeAttr('disabled');
                    }else{
                        console.log('pppppppppppppppppppppppppppp')
                        $('.select_mode').css('color','#000');
                        $('option').css('color','#000');
                        $('#ao').css('z-index','30');
                        $('.seclect_color').css('background','#cccccc');
                        $('.seclect_color').attr('disabled','disabled');                        
                    }
                    if(K_Mode == 'DEPTHIR' & !show_snap_view){
                            console.log('Press button Apply busing !!!')
                            $('.select_mode').css('color','red');
                            $('option').css('color','#000');                           
                            $('#btn_depth,#btn_ir,#divide_screen').removeAttr('disabled');                    
                            if(both_ir_depth_btn_press == 'ir'){
                                $('#btn_ir').attr('disabled','disabled'); 
                                console.log('Disabled button IR')
                            }else if(both_ir_depth_btn_press == 'depth'){
                                $('#btn_depth').attr('disabled','disabled');
                                console.log('Disabled button DEPTH')
                            }else{
                                $('#divide_screen').attr('disabled','disabled');
                                console.log('Disabled button DEPTH-IR')
                            }                                          
                    }
                    /********************************************/
                }
                    $('.mode').val(K_Mode);
                    $('#load_color').attr('hidden','hidden');
                    $('.select_range').val(K_FAR_NEAR);

                    $('.seclect_color,#extend_seclect_color').val(color);        

                    if(K_LD1 == "checked")
                        $('#checkbox1').prop('checked', true);
                    else
                        $('#checkbox1').prop('checked', false);
                    
                    if(K_LD2 == "checked")
                        $('#checkbox2').prop('checked', true);
                    else
                        $('#checkbox2').prop('checked', false);
                    
                    if(K_LD3 == "checked")
                        $('#checkbox3').prop('checked', true);
                    else
                        $('#checkbox3').prop('checked', false);
                    
                    if(K_LD4 == "checked")
                        $('#checkbox4').prop('checked', true);
                    else
                        $('#checkbox4').prop('checked', false);
                    
                    if(K_NRFI == "checked")
                        $('#LOAD_K_NRFI').prop('checked', true);
                    else
                        $('#LOAD_K_NRFI').prop('checked', false);  

                    console.log('Step 6')
                    K_GAIN = parseInt(K_GAIN);
                    $('#demo_gain').val(K_GAIN);
                    $('#myRange_gain').val(K_GAIN);
                    K_PULSE = parseInt(K_PULSE);
                    $('#demo_pulse').val(K_PULSE);
                    $('#myRange_pulse').val(K_PULSE);
                    K_Threthold = parseInt(K_Threthold);
                    $('#demo_coring').val(K_Threthold);
                    $('#myRange_coring').val(K_Threthold);
                        
                    //Control brightness return 0
                    $('#set').hide();
                    $('#exposure').val(0);
                    $('#brightness_number').val(0);                           
                    add_filter(); 
                    $('#reset_counter').mouseenter();
                    console.log('Step 7')
                    $('#img_loading_apply').remove();
                    if(show_snap_view){
                        $('.loading_apply_show').remove();   
                        disabled_btn_return = false;                     
                    }
                    $('.select_range,.select_mode,.seclect_color,#checkbox1,#checkbox2,#checkbox3,#checkbox4,#demo_gain,#myRange_gain,#demo_pulse,#myRange_pulse,#demo_coring,#myRange_coring,#LOAD_K_NRFI,#default_option,#x-button-drop').removeAttr('disabled');
                })
            })            
        });       
        
    /* End Javascript and Jquery */

</script>

<style>
    .iv-large-image-ss{width:320px;height:240px;position:relative}
    #scream,#scream_1 {display:none}
    .img-comp-slider{background: rgba(255,255,255,0.4)}
    body{background: rgba(220,220,216,0.3)}
    #my{width:640px;height:480px;border:none;float:left;margin-left:5px;z-index:10;position:relative;overflow:hidden}
    #my1,#my2{width:640px;height:480px;margin: 0 auto;z-index:1;position:relative;overflow:hidden}
    .control_bar{position: absolute;width: 35px;height: 35px;line-height: 40px;text-align:center;border:none;z-index:20;background:rgba(0,0,0,0.3);top:3;right:3}
    .control_bar_ir{position: absolute;width: 35px;height: 35px;line-height: 40px;text-align:center;border:none;z-index:20;background:rgba(0,0,0,0.3);display:none}
    *{margin: 0;padding: 0;}  
    div.main-container{width:960px;height:860px;margin: 0px auto; background:#ffffff;position:relative;z-index:20;box-shadow: 0px 0px 11px 0px rgba(0,0,0,0.3)}
    div .banner{width:960px;height:65px;box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.3);position:relative;}
	div .banner img{float:right}
    div .banner .banner-trai img{width:180px;height:50px;float:left; margin-top:7.5px;margin-left:15px;}
    div .banner .banner-phai {position:absolute;z-index:-10;height:100%; width:100%;line-height:65px; color:#7BBE35;font-size:30px;font-weight:bold;font-family:sans-serif;word-spacing:4px;text-align:center}
    #my_video{float:left;width:640px;height:480px;position:absolute;z-index:11}
    #tool{width:300px;float:right;position:relative;display:none}    
        .box{margin-left:10px;margin-top:10px;width:280px;height:30px;display:block}
        .mode_ir_depth{margin-left:10px;clear:left;width:328px;height:30px;margin-top:10px;display:block;position:relative}
        .pulse-count {margin-left: 10px;clear: left;width: 290px;height:50px;margin-top:35px;display:block;position:relative}
        .LD {margin-left:10px;clear:left;width:295px;height:65px;margin-top:10px;position:relative;padding-top:3px;display:inline-block}
        .coring{margin-left:10px;clear:left;width:290px;height:50px;margin-top:10px;display:block;position:relative}
        .filter{margin-left:10px;clear:left;margin-top:15px;width:310px;height:20px;display:block;position:relative} 
        .span{width:70px;height:21px;float:left;margin-left:10px;font-weight:bold;font-size:16px;font-family:Arial;margin-top:3px}      
        #submit{font-size:19px;cursor:pointer;font-weight:bold;width:125px;height:45px;color:white;background:#989595;border-radius:10px;transition:color 0.1s;display:block;letter-spacing:1px;right:0;position:absolute;line-height:45px}
        .title{font-size:16px;font-weight:bold;font-family:Arial;position:absolute}
        .temperature_number{width:212px;height:21px;background:#EBEBE4;text-align:center;font-size:16px;border:none;position:absolute;left:0;top:1;background:#ffffff}
        .temperature{margin-left: 10px; margin-top: 15px;width:300px;height:45px;display:block;position: relative;}
        #warning-temp {position:absolute; font-size:30px;left:95px;top:-5px;opacity:0.8;}
    .result_kq{position:relative;width:240px;height:45px;float:right;margin-right:10px}
    .banner-bottom{width:250px;height:30px;float:right;margin-right:1px;margin-top:5px}
    #date{width:400px;float:left;height:30px;position:relative;z-index:10;margin-top:5px}
    .date_style{position:absolute;width:100%;height:100%;top:0;left:0;line-height:30px;text-indent:17px;font-size:15px;font-family:Tahoma;word-spacing:-2px;display:none}
    .user{width: 150px; height: 30px; line-height: 30px; text-align: center; float: left; font-family: sans-serif; font-weight: bold;font-size: 18px}
    .logout{width: 100px; height: 30px;float: right;}
    .footer{position:absolute;z-index:-1;bottom:0;width:960px;height:130px;margin-bottom:0px;text-align:center;line-height:30px;margin-left:auto;margin-right:auto;font-family:"Open Sans"}
    .footer h4{font-family: sans-serif;font-size:15px;}
    .log_out{width: 100px; height: 30px; border: none; display: block; text-align: center; cursor: pointer; text-transform: uppercase; outline: none; overflow: hidden; position: relative; color: #fff; font-weight: 700; font-size: 15px; background-color: #222; margin: 0 auto; box-shadow: 0 5px 15px rgba(0,0,0,0.20);} 
    .log_out span{position: relative; z-index: 1; } 
    .log_out span:hover{text-decoration: underline;}
    .log_out:after{content: "";position:absolute;left:0;top:0;height:490%;width:140%;background:#7BBE35;-webkit-transition: all .5s ease-in-out;transition: all .5s ease-in-out;-webkit-transform: translateX(-98%) translateY(-25%) rotate(45deg);transform: translateX(-98%) translateY(-25%) rotate(45deg)}
    .log_out:hover:after{-webkit-transform: translateX(-9%) translateY(-25%) rotate(45deg);transform: translateX(-9%) translateY(-25%) rotate(45deg)}
    .main-video {width:960px;height:535px}
    .title_video {margin-bottom:15px;margin-left:5px;border:1px solid #fff;position:relative;width:640px;height:50px;float:left;line-height:50px;text-align:center;font-family:'Josefin Slab';word-spacing:4px;letter-spacing:1px;font-weight:bold}
    .title_control {font-family:'Josefin Slab';width:300px;height:50px;float:left;line-height:50px;text-align:center;margin-left:15px;word-spacing:4px;letter-spacing:1px}
    .frame_range {height:25px;width:207px;position:relative;display:inline-block}
    .select_range{height:100%; font-size:16px;width:100%;line-height:25px;-webkit-appearance:none; -moz-appearance:none;appearance:none;padding-left:5px;outline:none;border: 1px solid #ccc;box-shadow: 1px 1px -1px #E0E0E0}
    /*.select_range:hover{border: 1px solid #7BBE35;}*/
    .frame_range::after{content:'\25bc';position:absolute;top:0;right:0;text-align:center;font-size:12px;pointer-events:none;border:none;width:20px;height:25px;border-radius: 0 3px 3px 0;line-height:25px;border-left: 1px solid #cccccc}
    .select_mode {height:100%;width:100%;line-height:25px;font-size:14px;padding-left:5px;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;border: 1px solid #ccc;box-shadow: 1px 1px -1px #E0E0E0}
    /*.select_mode:hover {border: 1px solid #7BBE35;}*/
    .frame_mode {height:25px;width:98px;display:inline-block;position:relative}
    .frame_mode::after{content:'\25bc';position:absolute;top:0;right:0;text-align:center;font-size:12px;pointer-events:none;border:none;width:20px;height:25px;border-radius: 0 3px 3px 0;line-height:25px;border-left: 1px solid #cccccc}
    #load_color:hover{cursor: pointer;}
    #load_color{height:25px;width:25px;position:absolute}
    #load_temp{display: inline-block; margin-left: 213px; position: relative;cursor:pointer; height:25px;width:25px;}
    #html{margin-top:-23px;margin-left:-5px;position:relative;top:8;left:-2;width:25px;height:25px;display:inline-block}
    option{text-indent:10px}
    .container{display:inline-block;position:relative;padding-left:22px;margin-bottom:12px;cursor:pointer;margin-right:10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:15px;width:395px;font-weight:normal}
    .container input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}
    .checkmark{position:absolute;top:2;left:0;height:18px;width:20px;background-color:#eee;border-radius:5px;border: 1px solid #ccc}
    .container:hover input ~ .checkmark {background-color: #ccc}
    .container input:checked ~ .checkmark {background-color: #7BBE35}
    .checkmark:after {content: "";position: absolute;display: none}
    .container input:checked ~ .checkmark:after {display: inline-block}
    .container .checkmark:after {left:7px;top:2px;width:5px;height:10px;border: solid white;border-width: 0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}
    .slider{margin-top:7px; -webkit-appearance:none;width:100%;height:15px;border-radius:5px;background:#d3d3d3;outline:none;opacity:0.7;-webkit-transition:.2s;transition: opacity .2s}
    .slider:hover{opacity: 1}
    .slider::-webkit-slider-thumb {-webkit-appearance:none;appearance:none;width:25px;height:25px;border-radius:50%;background:#7BBE35;cursor:pointer}
    .slider::-moz-range-thumb {width:25px;height:25px;border-radius:50%;background:#7BBE35;cursor:pointer;z-index:20;position:absolute}
    
    .b{display:inline-block;width:300px;height:30px;position:relative;margin-top:-5px}
    .b_pulse{display:inline-block;width:230px;height:30px;position:relative;margin-left:70px}
    .b_coring{display:inline-block;width:230px;height:30px;position:relative;margin-left:70px}
    .title_gain{display:inline-block;float:left;font-weight:bold;width:70px;height:30px;line-height:30px;margin-left:10px;font-size:16px;font-family:Arial}
    .d{height:30px;width:206px;float:left;margin-left:-14px}
    #demo_gain{height:30px;border:none;margin-left:5px;margin-top:9px;width:50px;position:absolute;left:6px;text-align:right;font-size:16px}
    #demo_pulse{text-align:right;height:30px;float:left;border:none;margin-left:5px;width:50px;position:absolute;left:-74px;font-size:16px}
    #demo_coring{text-align:right;height:30px;border:none;margin-left:5px;width:50px;font-size:16px;position:absolute;left:-74px}
    .option_color{width:105px;height:25px;border-radius: 0 4px 4px 0;position:relative;cursor:pointer;z-index:20}
    .option_color::after{content:'\25bc';position: absolute;top:0;right:0;text-align:center;font-size:12px;pointer-events:none;border:none;width:20px;height:25px;border-radius: 0 3px 3px 0;line-height:25px;border-left: 1px solid #cccccc}
    select{width:100%;height:100%}
    #hang{height:100%;width:100%;line-height:25px;font-size:14px;padding-left:5px;appearance:none;-webkit-appearance:none;-moz-appearance:none;font-family:Arial;outline:none;border: 1px solid #ccc;box-shadow: 1px 1px -1px #E0E0E0}
    /*#hang:hover{border: 1px solid #7BBE35}*/
    .content {width:110px;height:25px;display:inline-block;position:relative}
    h3{font-weight: bold;font-family:bookman}
    .mode {position: fixed; width:100px; height: 20px; left:0; bottom:0}
    #slider_gain {margin-left:67px}
    input[type=number] {
        -moz-appearance:textfield; /* Firefox */
        -webkit-appearance:textfield
    }

    /****************/
    .input {display:block;opacity:0}
    label[title=led] {width:38px;height:20px;cursor:pointer;display:inline-block;position:relative;background:rgb(189, 189, 189);border-radius:30px;transition:background-color 0.4s;-moz-transition:background-color 0.4s;-webkit-transition:background-color 0.4s;float:right}
    label[title=led]:after {left:0;width:20px;height:20px;margin:0;content:'';position:absolute;background:#FFF;border-radius:10px;border: 1px solid #cccccc}
    input:checked + label[title=led] {background: rgba(232,81,17,1)}
    input:checked + label[title=led]:after {left: auto;right: 0}
    .ab{width:175px;height:70px;display:inline-block;margin-left:102px;border:1px solid #fff;position:absolute;top:3;left:0}
    .section1{width:76px;height:25px;margin-right:8px;position:relative;float:left}
    .section2{width:76px;height:25px;position:relative;float:left}
    .section3{width:76px;height:25px;position:relative;float:left;margin-right:8px;margin-top:10px}
    .section4{width:76px;height:25px;position:relative;float:left;margin-top:10px}
    #checkbox1, #checkbox2, #checkbox3, #checkbox4{position: absolute}
    .title_LD1{font-size:15px;font-family:arial;padding-left:2px}
    #ao{background:#cccccc;position:absolute;height:25px;width:105px;line-height:25px;z-index:10;top:0;font-size:15px;font-family:Arial;-webkit-appearance:none;-moz-appearance:none;appearance:none;text-align:center;outline:none;border: 1px solid #ccc}
    .full,.full_ir{cursor:pointer;position:absolute;top:5;right:5;width:25px;height:25px}
    .closefull,.closefull_ir{cursor:pointer;position:absolute;width:30px;top:0;bottom:0;left:0;right:0;margin: auto auto;display:none}
    .scale_zoom,.scale_zoom_ir{position:absolute;z-index:20;width:60px;height:60px;background:rgba(0,0,0,0.7);line-height:60px;text-align:center;font-size:20px;border-radius:10px;box-shadow: 0px 0px 11px 0px rgba(0,0,0,0.3);display:none;color:#fff;top:0px;bottom:0px;left:0px;right:0px;margin:auto}    
    .load_apply{width:25px;height:25px;position:absolute;left:5;margin-top:13px}
    .frame_apply{width:160px;height:45px;display:block;position:relative;float:right;margin-right:27px}
    /*CSS option Language*/
    .fr_contry{width:120px;height:50px;margin-left:100px;position:relative;margin-top:35px;margin-left:17px}
    .contry-ja{height:50px;width:40px;float:left;position:absolute;background:#cccccc;cursor:pointer;right:0}
    .title_jp{width:38px;height:15px;display:block;line-height:15px;text-align:center;color:#000000;font-weight:bold;margin-top:3px;font-family:Tahoma}
    .im_jp{width:32px;height:32px;position:absolute;z-index:10;bottom:0;left:5}
    .im_jp1{width:32px;height:32px;position:absolute;z-index:20;bottom:0;left:5}
    .contry-en{height:50px;width:40px;float:left;position:absolute;background:#cccccc;cursor:pointer;left:0}
    .title_en{width:38px;height:15px;display:block;line-height:15px;text-align:center;color:#000000;font-weight:bold;margin-top:3px;font-family:Tahoma}
    .im_en{width:32px;height:32px;position:absolute;z-index:10;bottom:0;left:4}
    .im_en1{width:32px;height:32px;position:absolute;z-index:20;bottom:0;left:4}
    .contry-vn{height:50px;width:41px;float:left;position:absolute;cursor:pointer;right:39;background:#cccccc}
    .title_vn{width:38px;height:15px;display:block;line-height:15px;text-align:center;color:#000000;font-weight:bold;margin-top:3px;font-family:Tahoma}
    .im_vn{width:32px;height:34px;position:absolute;z-index:10;bottom:-1;left:5}
    .im_vn1{width:32px;height:34px;position:absolute;z-index:20;bottom:-1;left:5;top:17}
    .fixed{width:960px;height:100%;position:fixed;margin-left:auto;margin-right:auto;left:0;right:0;bottom:0;top:0;z-index:-1}
    .fra_background{width:100%;height:800px;position:relative;overflow:hidden}
    .language{width:25px;height:25px;position:absolute;top:0;left:0}
    /***********************************/
    .title_range{font-size:16px;font-weight:bold;font-family:Arial; display:inline-block;width:51px;border:1px solid #fff}
    .title_mode{font-size:16px;font-weight:bold;font-family:Arial;display:inline-block;width:52px;border:1px solid #fff}
    .title_light{font-size:16px;font-weight:bold;font-family:Arial;display:inline-block;width:105px;border:1px solid #fff}
    .title_pulse{font-size:16px;font-weight:bold;font-family:Arial;display:inline-block;width:125px;border:1px solid #fff;height:22px}
    .title_coring{font-size:16px;font-weight:bold;font-family:Arial;display:inline-block;width:200px;border:1px solid #fff;height:22px}
    .test_box{position:absolute;width:270px;height:30px;top:0;left:55px}
    .cpu{width:640px;text-align:center;font-family:Arial;font-size:15px;margin-left:5px;border:none;height:30px;background-image: linear-gradient(#fff, #9AD9EA);font-style:italic}
    #default_params{background:#7BBE35;color:#fff;height:30px;width:70px;border-radius:5px;font-size:15px;margin-left:10px;line-height:30px}

    .save_param{display: block;width:277px;height:45px;line-height:35px;position:relative}
    .fra_name_save{width:170px;height:27px;position:absolute;top:3;left:65;display:none}
    #insert_option{width:40px;line-height:23px;position:absolute;right:0;top:-5;cursor:pointer}
    .name_file{border: 1px solid #c4c4c4;height:30px;width:130px;font-size:13px;font-family:Arial;text-indent:10px;padding: 4px 4px 4px 4px;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;box-shadow: 0px 0px 8px #d9d9d9;-moz-box-shadow: 0px 0px 8px #d9d9d9;-webkit-box-shadow: 0px 0px 8px #d9d9d9}
    /*#name_file_s{border: 1px solid #c4c4c4;height:30px;width:130px;font-size:13px;font-family:Arial;text-indent:10px;padding: 4px 4px 4px 4px;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;box-shadow: 0px 0px 8px #d9d9d9;-moz-box-shadow: 0px 0px 8px #d9d9d9;-webkit-box-shadow: 0px 0px 8px #d9d9d9}*/
    /* ----    Split Button     ----*/
    /*#frame {position:relative;display:inline-block;text-align:left;margin-top:3px;margin-left:10px}*/
    #frame{float:right;margin-right:26px}
    .x-button {position: relative;margin:0;height:30px;float:left;outline:none;border: 1px solid #cccccc;box-shadow: 1px 1px 2px #E0E0E0;cursor:pointer;background:#ffffff}
    #default_option:active {background: #A3D272}
    #x-button-drop {border-left:none;height:30px;width:25px}
    .open > #insert {display: block;}
    #insert{position:absolute;top:27px;right:16;z-index:1000;display:none;float:left;min-width:140px;padding: 5px 0;margin: 2px 0 0;font-size:14px;list-style: none;background-color: #F2F2F2;background-clip: padding-box;border: 1px solid #E0E0E0;box-shadow: 0px 0px 5px 3px #E0E0DF;background: #ffffff;margin-top: 5px;padding:0;padding-bottom:2px}
    #default_option{width:105px;font-weight:bold}
    span[title=' ']:hover{background: #A3D272;color:#fff;font-weight:bold}
    span[title=' ']{padding-left:10px;margin-left:1px}
    body{position:relative}
    .img-product-fly{position:absolute;z-index:9999;width:20px;transition: all 1s ease}
    option:hover{font-weight:bold}
    #lable_note{position:absolute;margin-left:25px;font-style:italic;cursor:pointer;font-family:Arial;font-size:14px}
    .block{display:block}
    .fra_profile{width:300px;height:30px;margin-top:15px;position:relative}
    .label_profile{width:130px;height:30px;line-height:30px;display:inline-block;font-size:16px;font-family:Arial;font-weight:bold;margin-left:10px}
    #add_profile{border-bottom:3px solid #cccccc;margin-bottom:3px;height:30px;line-height:30px;margin-left:1px}
    .title_add_file_en{cursor:pointer;width:85%;display:inline-block;font-weight:bold}
    .title_add_file_vn {cursor:pointer;width:80%;display:inline-block;font-weight:bold;font-size:16px;text-align:center}
    .title_add_file_jp{cursor:pointer;width:85%;display:inline-block;font-weight:bold;font-size:12px}
    .img_add_file{width:20px;display:inline-block;margin-top:-5px;cursor:pointer}
    #name_file_s{width:110px;padding-left:10px;height:25px;font-size:15px;font-family:Arial}
    #insert_option_s{width:25px;float:right;margin-top:2px;cursor:pointer}
    #frame_record,#download{display:none}
    #frame_record{margin-top:9px;position:relative;text-align:center}
    #second{width:70px;text-align:center;display:none;outline:none;border: 2px solid #ACE0EE;box-shadow: 1px 1px 2px #E0E0E0;height:25px;line-height:25px;position:absolute;right:0;top:0;font-size:15px;background:none}
    #namefile{width:80px;outline:none;border: 1px solid #cccccc;box-shadow: 1px 1px 2px #E0E0E0;height:22px;line-height:22px;font-family:Arial;font-size:15px}
    #recorder{width:120px;height:123px;float:left;margin-right:315px;margin-top:-9px;float:right;position:relative}
    
    #record,#stop_record{position:relative;width:70px;outline:none;border: 1px solid #cccccc;box-shadow: 1px 1px 2px #E0E0E0;height:25px;line-height:25px;border-radius:15px;text-indent:5px;font-weight:bold}
    #stop_record{float:right;display:none;margin-right:0px}
    #record{float:right}
    #update_record{height:22px;line-height:22px;width:30px;text-align:center;outline:none;border: 1px solid #cccccc;box-shadow: 1px 1px 2px #E0E0E0;position:absolute;font-weight:bold}
    #delete_record{position:absolute;right:0;top:0;height:25;height:22px;height:22px;line-height:22px;width:30px;text-align:center;outline:none;border: 1px solid #cccccc;box-shadow: 1px 1px 2px #E0E0E0;display:none;font-weight:bold}
    #infor_record{width:140px;height:25px;line-height:25px;text-align:center;float:right;display:none;top:0;left:-100;position:absolute}
    .enable_record_btn{background:#fff;color:#000}
    .recording_btn{background:#000;color:#fff};
    .disable_record_btn{background:#F0F0F0;color:#000}

    #my_video_2{position:absolute;width:640px;height:480px;z-index:1111;top:0;left:0}
    .fra_btn_depthir{border: 1px solid #fff;width:180px;height:25px;background:none;position:absolute;top:38;right:-2}
    #btn_depth{position:absolute;top:0;left:59;height:25px;line-height:25px;width:61px;cursor:pointer;outline:none;border: 1px solid#cccccc;font-family:sans-serif;font-weight: normal}
    #btn_ir{position:absolute;top:0;right:0;height:25px;line-height:25px;width:60px;cursor:pointer;outline: none;border: 1px solid#cccccc;box-shadow: 1px 1px 2px #E0E0E0;font-family:sans-serif;font-weight: normal}
    #my1{float:left}
    #my2{float:right}
    #extend_mode{position:absolute;top:35;right:-35;height:30px;cursor:pointer}
    #frame_title_video{margin-top:80px}
    #return_to_main{position:absolute;top:-20;cursor:pointer;display:none}
    #title_icon_return{position:absolute;top:-3;right:0;font-family:Arial;font-size:15px;cursor:pointer;height:30px;line-height:30px;display:none;word-spacing: 0px;letter-spacing}
    #frame_extend_seclect_color{position:absolute;top:50;left:0;width:110px;height:25px;outline:none;box-shadow: 1px 1px 2px #E0E0E0;display:none}
    #extend_seclect_color{width:100%;height:25px;line-height:25px;position:absolute;top:0;left:0;font-size:14px;appearance:none;text-indent:2px;-webkit-appearance:none;-moz-appearance:none;font-family:sans-serif;outline:none;border: 1px solid #ccc;box-shadow: 1px 1px -1px #E0E0E0}
    #frame_extend_seclect_color::after{content:'\25bc';position: absolute;top:0;right:0;text-align:center;font-size:12px;pointer-events:none;border:none;width:20px;height:25px;border-radius: 0 3px 3px 0;line-height:25px;border-left: 1px solid #cccccc}
    #loop_user_login{position:absolute;top:30;right:0;height:25px;width:240px;font-size:12px;font-weight:bold;color:red;text-align:right;border:none;font-family:Arial;display:none;}
    #divide_screen{position:absolute;top:0;left:-19;height:25px;line-height:25px;width:80px;cursor:pointer;outline:none;border: 1px solid #cccccc;display:none;font-family:sans-serif;font-weight: normal;}
    .hang1 {position:absolute;width:auto;height:auto;overflow:hidden;z-index:1}

    #frame_my_video_ao{width:640px;height:480px;display:block;vertical-align:middle}

    #frame_my_video_2_ao{width:640px;height:480px;display:block;}
    .img-comp-slider {position:absolute;z-index:9;cursor:ew-resize;width:40px;height:40px;background-color:none;border-radius:50%;opacity:0.9}
    /*.img-comp-slider:hover {opacity: 1;background:none}*/
    #title_depth_image{border:none;position:absolute;left:0;top:53;height:25px;width:640px;display:none;font-family:sans-serif;font-weight:bold;font-size:15px;background:none;text-align:center;line-height:25px}
    #title_ir_image{border:none;position:absolute;left:640;top:53;height:25px;width:640px;display:none;font-family:sans-serif;font-weight:bold;font-size:15px;background:none;text-align:center;line-height:25px}
    #sys_working{height:25px;width:300px;line-height:25px;position:absolute;right:27;bottom:-30;text-align: right;color: red;font-size: 15px;font-family: Arial;border: none;background: none;font-weight:bold;display:none}
    * {box-sizing: border-box}
    #fra_slider_zoom{width:400px;height:50px;float:left;margin-top:10px}
    .title_zoom{height:30px;width:120px;font-family:Arial;font-weight:bold;margin-left:5px;float:left;margin-top:4px;}
    .fra_zoom_and_number{height:35px;width:260px;float:right}
    #number_zoom_ss{width:45px;height:30px;float:left;text-align:right;border:none;background:none}
    #slider_zoom_ss{width:206px;float:left;margin-left:5px}    
    input[type=range]::-moz-focus-outer {border: 0}
    #hang2{z-index:8}

    .opens > #fra_option_maximum_file {display:block}

    .openctrl > #tool {display: block}

    .op_rc {
        display: inline-block;
        cursor: pointer;
        position: relative;
        padding-left: 20px;
        margin-right: 15px;
        font-size: 13px;
        height: 19px;
        line-height: 20px;
    }

    .wrapper {
        width: 80px;
        height:45px;
        margin: 0;
        /*border: 1px solid #000;*/
        float:left;
        margin-top: -10px;
    }

    input[type=radio]{
        display: none;
    }

    .op_rc:before {
        content: "";
        display: inline-block;
        width: 16px;
        height: 16px;
        margin-right: 10px;
        position: absolute;
        left: 0;
        bottom: 1px;
        background-color: #aaa;
        box-shadow: inset 0px 2px 3px 0px rgba(0, 0, 0, .3), 0px 1px 0px 0px rgba(255, 255, 255, .8);
    }

    .radio .op_rc:before {
        border-radius: 8px;
    }

    input[type=radio]:checked + .op_rc:before {
        content: "\2022";
        color: #f3f3f3;
        font-size: 30px;
        text-align: center;
        line-height: 18px;
    }
    .radio{
        width: 95px;
        height:20px;
        line-height:20px;
        /*border: 1px solid #fff;*/
        float:left;
        padding-left: 10px;
    }

    #frame_option_rc{
        width:165px;
        height:45px;
        /*border: 1px solid yellow;*/
        position: relative;
        float:left;
    }
    #title{
        width:165px;
        height:20px;
        line-height:20px;
        font-family:Arial;
        font-size:12px;
        text-align:center;
        /*border:1px solid red;*/
        float:left;
        font-weight:bold;
    }
    #request_rc{
        float:left;
        width:100px; 
        margin-left: 35px;
        margin-top: 3px;
    }
    #fra_option_maximum_file{
        /*border: 1px solid blue;*/
        width: 170px;
        height: 95px;
        position:absolute;
        bottom:0;
        right:0;
        box-shadow: 0px 0px 11px 0px rgba(0,0,0,0.2);
        display:none;
    }

    #img_loading_apply{
        width:640px;
        height:480px;
        display:block;
        z-index:1000;
        position: absolute;
        top:0;
        left:0;
    }
    #ctrl{
        display: none;
        width:30px;
        height:150px;
        background:none;
        position:absolute;
        right:-31;
        top:170;
        border-left:none;
        z-index:100
    }
    #btn_ctrl{
        border-radius: 10px 10px 0px 0px;
        border: 2px solid #646262;
        border-bottom: none;
        background: #ccc;
        position: absolute;
        top: 60;
        right: -60;
        width: 150px;
        height: 30px;
        transform: rotate(90deg);
        font-size: 15px;
        font-family: sans-serif;
        text-align: center;
        line-height: 30px;
        cursor: pointer;
    }

    .loading_apply_show{
        width: 640px;
        height: 480px;
        /*display: block;*/
        z-index: 200;
        position: absolute;
        top: 0;
        left:0;
    }

</style>

<body>
<div class="main-container">

        <!-- Create banner -->
            <div class="banner">
                    <div class="banner-trai"><a href="http://www.brycen.com.vn/" target="_blank"><img src="{{url_for('static',filename='img/logo_nen.png')}}" /></a></div>
                    <div class="banner-phai" title="" key="depth imaging solution"></div>
                    <div class="banner-img"><center><img width="130px" height="65px" src="{{url_for('static',filename='img/tofcamera_nen.png')}}" /></center></div>
            </div> 
            <div id='ctrl'>
                <span id='btn_ctrl' title="" key="control panel"></span>
            </div>
            <script>
                $(document).ready(function(){                  
                    var splitCtrl = $('#ctrl');
                    $('#btn_ctrl').click(function(){     
                        $('.update_params').mouseenter();                                                             
                        if(!splitCtrl.hasClass('openctrl')){
                            splitCtrl.addClass('openctrl')
                            $('#btn_ctrl').css('font-weight','bold').css('background','#A2D171');
                            //console.log(1)
                        }else{
                            splitCtrl.removeClass('openctrl');
                            $('#btn_ctrl').removeAttr('style');
                            //console.log(2)       
                            $('.update_params').mouseenter();             
                        }
                    })

                    $('#ctrl').click(function(event){                            
                        if(splitCtrl.hasClass('openctrl')){
                            event.stopPropagation();
                            //console.log(3)
                            $('#frame').removeClass('open');
                        }                            
                    });

                    $('html').on('click',function() {
                        if(splitCtrl.hasClass('openctrl')){                               
                            splitCtrl.removeClass('openctrl'); 
                            $('#btn_ctrl').removeAttr('style');
                            //console.log(4)    
                            $('.update_params').mouseenter();                                        
                        }
                    })
                })
            </script>
        <!-- End Create banner -->

    <div class="fra_background">

        <!--Create auto update time-->
            <div id="date">
                <div class='date_style' id="dateen" ></div> 
                <div class='date_style' id="datejp" ></div>
                <div class='date_style' id="datevn" ></div>
            </div> 

            <script>
                function dongho(){
                    var d = new Date();
                    var ngay = d.getDate();
                    var nam = d.getFullYear();
                    var thang = ['January','February','March','April','May','June','July','August','September','Octoober','November','December']
                    var thang_jp1 = ['01','02','03','04','05','06','07','08','09','10','11','12']
                    var thang_vn = ['1','2','3','4','5','6','7','8','9','10','11','12']
                    var gio = d.getHours();
                    var phut = d.getMinutes();
                    var giay = d.getSeconds();
                    var i = null;
                    var vn = null;
                    var a = null;
                    if (gio > 12){
                        i = 'PM';
                        a = '午後';
                        vn = 'Chiều';
                    }
                    if (gio < 12){
                        i = 'AM';
                        a = '午前';
                        vn = 'Sáng';
                    }
                    gio = ((gio + 11) % 12 + 1);
                    if (gio < 10)
                        gio = "0" + gio
                    if (phut < 10)
                        phut = "0" + phut
                    if (giay < 10)
                        giay = "0" + giay
                    document.getElementById('dateen').innerHTML = thang[d.getMonth()] + ". " + ngay + ", " + nam + " - " + gio + ":" + phut + " " + i;
                    document.getElementById('datevn').innerHTML = ngay + "/" + thang_vn[d.getMonth()] + "/" + nam + " - " + gio + ":" + phut + " " + vn;
                    document.getElementById('datejp').innerHTML = nam + '年' + thang_jp1[d.getMonth()] + '月' + ngay + '日' + ' - ' + a + ' ' +gio + '時' + phut + '分';              
                    setTimeout("dongho()",1000);
                }dongho();               
            </script>  
        <!-- End Create auto update time -->

        <!-- Logout and name User login -->
            <div class="banner-bottom">               
            <div class="user" ><span title="" key="welcome"></span><span> {{username}}</span></div>                 
                <div class="logout">
                    <form action="/logout" method="POST"> 
                        <input type='text' class='language' name="language" value="{{lang}}" style="display:none" />
                        <button class="log_out" type="submit"><span title="" key="log out"></span></button>
                    </form>
                </div>
            </div>   
        <!-- End Logout and name User login -->

        <!-- Setting Language-->
            <div class='fr_contry' style="display:none">
                <div class='contry-en' title="translate" id="en" >
                    <span class="title_en">EN</span>
                    <img class="im_en" src="{{url_for('static',filename='img/en.png')}}" />
                    <img class="im_en1" src="{{url_for('static',filename='img/en1.png')}}" />

                </div>
                <div class='contry-ja' title="translate" id="jp">
                    <span class="title_jp">JP</span>
                    <img class="im_jp" src="{{url_for('static',filename='img/jp.png')}}" />
                    <img class="im_jp1" src="{{url_for('static',filename='img/jp1.png')}}" />
                </div>
                <div class='contry-vn' title="translate" id="vn">
                    <span class="title_vn">VN</span>
                    <img class="im_vn" src="{{url_for('static',filename='img/vn.png')}}" />
                    <img class="im_vn1" src="{{url_for('static',filename='img/vn1.png')}}" />
                </div>
            </div>
        <!-- End setting Language -->

        <!-- Title video -->
            <div id='frame_title_video'>
                <div class="title_video">
                    <h3 title="" key="camera panel"></h3> 
                    <span id='title_depth_image' title='' key='DEPTH IMAGE'></span>
                    <span id='title_ir_image' title='' key='IR IMAGE'></span>
                    <div class='fra_btn_depthir'>
                        <input type='button' id='btn_ir' value='IR' />
                        <input type='button' id='btn_depth'  value='DEPTH' />
                        <input type='button' id='divide_screen' value='DEPTH-IR'/>
                    </div>
                    <img id="extend_mode" title='Extend display' src='../static/img/extend.png' />
                    <span id="title_icon_return" title='' key='Return display main'></span>
                    <img id="return_to_main" title='Return to main display' src='../static/img/return.png' />
                    

                    <div id="frame_extend_seclect_color">
                        <select id="extend_seclect_color">                                            
                            <option value='RAINBOW'>RAINBOW</option>
                            <option value='AUTUMN'>AUTUMN</option>
                            <option value='HOT'>HOT</option>
                            <option value='SPRING'>SPRING</option>
                        </select>
                    </div>                    
                </div>
                <div class="title_control"><h3 title="" key="control panel"></h3></div>                             
            </div>  

            <script>
                $(document).ready(function(){
                    $('#divide_screen').click(function(){        
                        both_ir_depth_btn_press = 'both';         
                        try{
                            stopTimeout();
                            stopTimeout_mode_ir();
                            $('#my1').remove();
                            $('#my2').remove();
                            $('#hang1').remove();
                            $('#hang2').remove();
                        }catch(err) {
                            console.log(err)
                        }

                        $(this).removeAttr('style').css('background','#A3D272').attr('disabled','disabled');
                        $(this).show();

                        $('#btn_depth').removeAttr('style').removeAttr('disabled');
                        $('#btn_ir').removeAttr('style').removeAttr('disabled'); 

                        /* Xoa my1, my2 tao lai hang1, hang2 va xoa zoom */
                        both_depthir();
                    
                        /* Chay thuoc tinh divide */
                        setTimeout(function(){
                            initComparisons();
                        },200)  

                        /* Dieu chinh brightness --> 0 */
                        document.getElementById('set').click();                           

                        setTimeout(function(){
                            /* Add Zoom Mode BOTH */
                            var viewer = ImageViewer($('#frame_my_video_ao'), {});      
                            window.viewer = viewer;      

                            var viewerss = ImageViewerss($('#my_video_2_ao'), {});      
                            window.viewerss = viewerss; 

                            var slider_zoom = document.getElementById("slider_zoom_ss");
                            var output_zoom = document.getElementById("number_zoom_ss");                        
                                                
                            output_zoom.value = slider_zoom.value;
                                                
                            slider_zoom.oninput = function() {
                                viewer.zoom(slider_zoom.value);                                         
                                output_zoom.value = this.value;                                                                
                                viewerss.zoom(slider_zoom.value);                                                          
                            }      
                        },100)                        

                        /* Tao lai gai tri hien thi % Zoom hang2 */                        
                        setTimeout(function(){
                            var add_zoom_ir = document.createElement('div');
                            add_zoom_ir.setAttribute("id",'scale_zoom_ir');
                            add_zoom_ir.setAttribute("class",'scale_zoom_ir');
                            add_zoom_ir.innerHTML = 100 + '%';
                            document.getElementById("hang2").appendChild(add_zoom_ir);
                            $('#scale_zoom_ir').css('z-index','-999').css('opacity','0'); 
                            startTimeout_mode_ir();
                        },200)  

                        /* Tao lai gai tri hien thi % Zoom hang1 */                        
                        setTimeout(function(){
                            $('#scale_zoom_s').remove();
                            var add_zoom_depth = document.createElement('div');
                            add_zoom_depth.setAttribute("id",'scale_zoom_s');
                            add_zoom_depth.setAttribute("class",'scale_zoom');
                            add_zoom_depth.innerHTML = 100 + '%';
                            document.getElementById("hang1").appendChild(add_zoom_depth); 
                            $('#scale_zoom_s').css('z-index','-999').css('opacity','0');
                            startTimeout();  
                        },300)
                                                                                           
                        setTimeout(function(){
                            //$('.iv-large-image-ss,.iv-snap-image-ss,#frame_my_video_ao').attr("src","{{ url_for('video_feed') }}")
                            $('#my_video_2_ao,#frame_my_video_ao').attr('src','../static/ready.jpg');
                        },600)
                        /* Ản đi giá trị phần trăm ở mode BOTH */
                        $('#slider_zoom_ss,#number_zoom_ss').val(100);

                        /* Đồng bộ Slide zoom */                        

                        hover_hang2_depthir();                  
                    })
                })
            </script>        
        <!-- End Title video -->

        <div class="main-video" id="main-video-ss">   
            <br><BR>
            <!--Show video TOF Camera-->
                <div id="my">
                    <div id="my1" style='opacity:0'> 
                            <img id="my_video" src="{{ url_for('video_feed') }}" />
                    </div>   
                    <div id='hang2' class='hang1 hang2' style='opacity:0'>
                        <img id='my_video_2_ao' src="{{ url_for('video_feed') }}" />
                    </div> 
                    <div id='hang1' class='hang1' style='opacity:0'>
                        <img id='frame_my_video_ao' src="{{ url_for('video_feed_3') }}" />
                    </div>
                    <img id='img_ready' src='../static/ready.jpg' style='display:block;width:640px;height:480px;position:absolute;z-index:100' />
                    <div class="control_bar" id="control_bar_s">                                        
                        <img id="start" class="full" onclick="openFullscreen()" src="{{url_for('static',filename='img/full3.png')}}"  />     
                        <img id="stop" class="closefull" onclick="closeFullscreen()" src="{{url_for('static',filename='img/exit.png')}}"/>
                    </div>            
                    <div class="control_bar_ir" id="control_bar_s_ir">                                        
                        <img class="full_ir" onclick="openFullscreen_ir()" src="{{url_for('static',filename='img/full3.png')}}"  />     
                        <img class="closefull_ir" onclick="closeFullscreen_ir()" src="{{url_for('static',filename='img/exit.png')}}"/>
                    </div>                       
                    <div class="scale_zoom" id="scale_zoom_s">100%</div>                    
                </div>
            <!-- End Show video TOF Camera-->     

            <!--Setting Camera-->
                <div id="tool">             
                    <form name="setup" enctype="multipart/form-data" class="form-disable">
                        <!--Range-->
                            <div class="box">
                                <span class="title_range" title="" key="range"></span>
                                <div class='frame_range'>
                                    <select id='K_FAR_NEAR' name="K_FAR_NEAR" class="select_range" >   
                                        <option hidden>{{K_FAR_NEAR}}</option>                      
                                        <option value='300mm-1000mm'>300mm-1000mm</option>                         
                                        <option value='1000mm-5000mm'>1000mm-5000mm</option>                          
                                    </select>
                                </div>
                            </div>
                        <!--End Range-->
                        
                        <!--Mode-->
                            <div class="mode_ir_depth">
                                <span class="title_mode" title="" key="mode"></span> 
                                <div class="test_box">
                                    <div class='frame_mode'>
                                        <select name="K_Mode" class="select_mode" id="select_mode" data-native-menu="false">              
                                            <option hidden>{{K_Mode}}</option>
                                            <option value="IR">IR</option>                          
                                            <option value="DEPTH">DEPTH</option>
                                            <option value="DEPTHIR">DEPTHIR</option>
                                        </select>
                                    </div>

                                    <div class='content'>
                                        <div class='option_color'>
                                            <select id='hang' name='color' class="seclect_color">
                                            <option hidden>{{color}}</option>
                                            <option value='RAINBOW'>RAINBOW</option>
                                            <option value='AUTUMN'>AUTUMN</option>
                                            <option value='HOT'>HOT</option>
                                            <option value='SPRING'>SPRING</option>
                                            </select>
                                        </div>
                                        <!--<select id='ao'disabled>
                                            <option>GRAYSCALE</option>
                                        </select>-->
                                        <input type='text' id='ao' value='GRAYSCALE' disabled />
                                    </div> 
                                    <div id="html"><a id='load_color'><img width="25px" height="25px" style="color:#989595" src="{{url_for('static',filename='img/load1.png')}}" /></a></div>
                                </div>
                            </div>
                        <!--End Mode-->
                        
                        <!--LED-->
                            <div class="LD">                       
                                <span class="title_light" title="" key="light source"></span>

                                <div class='ab'>
                                        <section class='section1'>
                                        <span class='title_LD1'>led 1</span>
                                            <input class='input' type="checkbox" id="checkbox1" name="K_LD1" {{K_LD1}}/>
                                            <label title='led' for="checkbox1"></label>
                                        </section>
                                        <section class='section2'>
                                        <span class='title_LD1'>led 2</span>
                                            <input class='input' type="checkbox" id="checkbox2" name="K_LD2" {{K_LD2}}/>
                                            <label title='led' for="checkbox2"></label>
                                        </section>
                                        <section class='section3'>
                                        <span class='title_LD1'>led 3</span>
                                            <input class='input' type="checkbox" id="checkbox3" name="K_LD3" {{K_LD3}}/>
                                            <label title='led' for="checkbox3"></label>
                                        </section>
                                        <section class='section4'>
                                        <span class='title_LD1'>led 4</span>
                                            <input class='input' type="checkbox" id="checkbox4" name="K_LD4" {{K_LD4}}/>
                                            <label title='led' for="checkbox4"></label>
                                        </section>                         
                                </div>                 
                            </div>
                        <!--End Led-->
                       
                        <!--IR Gain-->
                            <div class='b' >
                            <span class="title_gain" title="" key="ir gain"></span><br>
                            <input id="demo_gain" type="number" min=1 max=2047 name="K_GAIN" value={{K_GAIN}}>
                                <div class='d' id='slider_gain'>
                                <input type="range" min=1 max=2047 class="slider" id="myRange_gain" value={{K_GAIN}}>
                                </div>
                            </div>
                        <!--End IR Gain-->
                        
                        <!--Pulse Count-->
                            <div class="pulse-count">                       
                                <span class="title_pulse" title="" key="pulse count"></span>                                   
                                    <div class='b_pulse' >
                                        <input type="number" min="1" max="2000" value={{K_PULSE}} id="demo_pulse" />
                                        <div class='d'>
                                        <input type="range" min="1" max="2000" value={{K_PULSE}} name="K_PULSE" class="slider" id="myRange_pulse" />
                                        </div>  
                                            
                                    </div>    
                                    
                            </div>
                        <!--End Pulse Count-->
                        
                        <!--Coring Threshold-->
                            <div class="coring">                       
                            <span class="title_coring" title="" key="coring threshold"></span>
                                    <div class='b_coring' >
                                    <input id="demo_coring" type="number" min="1" max="1000" name="K_Threthold" value={{K_Threthold}} />
                                        <div class='d'>
                                        <input type="range" min="1" max="1000" value={{K_Threthold}} name="K_Threthold" class="slider" id="myRange_coring" />
                                        </div>
                                    
                                    </div>
                            </div>
                        <!--End Coring Threshold-->
                                              
                        <!--Filter-->
                            <div class="filter">
                                <label class="container"> <span style="text-transform:none;font-size:16px;font-weight:nomal;margin-left:10px;" title="" key="In-camera noise reduction filter"> </span>
                                <input type="checkbox" name="K_NRFI" id="LOAD_K_NRFI" {{K_NRFI}}>
                                <span class="checkmark"></span>
                                </label>           
                            </div>
                        <!--End Filteer-->

                        <!-- ToF params profile -->
                            <div class='fra_profile'>
                                <span class='label_profile' title='' key='Params profile'></span>

                                <div id="frame">
                                    <input class="x-button" id="default_option" type='button' key="Default" value='' />
                                    <input class="x-button" id="x-button-drop" type='button' value='&#9660;' />

                                    <ul id="insert">
                                    
                                    </ul>
                                </div>
                            </div>
                                <script>
                                    $(function() {
                                        
                                        var splitBtn = $('#frame');
                                        $('#x-button-drop').on('click', function() {
                                            if (!splitBtn.hasClass('open')){
                                                splitBtn.addClass('open');
                                                $('#reset_counter').mouseenter();  
                                                //console.log('--> 1')      
                                            }else{
                                                splitBtn.removeClass('open');
                                                //console.log('--> 2') 
                                            }                 
                                        });
                                        
                                        $('#frame').click(function(event){
                                            event.stopPropagation();
                                            //console.log('-->3')
                                        });

                                        $('html').on('click',function() {
                                            if(splitBtn.hasClass('open')){
                                                splitBtn.removeClass('open');
                                                //console.log('--> 4') 
                                                if($('.language').val() == 'en'){
                                                    $('#add_profile').html("<span class='title_add_file_en' onClick='save_as_profile()'>Save as profile</span><img class='img_add_file' src='../static/img/save_as_profile.png' onClick='save_as_profile()'/>");
                                                }else if($('.language').val() == 'vn'){
                                                    $('#add_profile').html("<span class='title_add_file_vn' onClick='save_as_profile()'>Ghi nhớ</span><img class='img_add_file' src='../static/img/save_as_profile.png' onClick='save_as_profile()'/>");
                                                }else{
                                                    $('#add_profile').html("<span class='title_add_file_jp' onClick='save_as_profile()'>ファイルとして保存</span><img class='img_add_file' src='../static/img/save_as_profile.png' onClick='save_as_profile()'/>");
                                                }                                                                                                                                                          
                                            }                                 
                                        });
                                        
                                        /* Chayj function gan trong the li phan nay code se khong chay */
                                        $('li').click(function(){                                            
                                            splitBtn.removeClass('open');
                                            console.log($(this).text());       
                                        })

                                        $('#default_option').click(function(){
                                            splitBtn.removeClass('open');
                                            console.log($(this).val())       
                                        })
                                    });
                                </script>
                            
                        <!-- End ToF params profile -->   

                        <!--Temp-->
                            <div class="temperature">
                                <span class="title" title="" key="status"></span>
                                <div class='result_kq'>
                                    <input class="temperature_number" type="text" name="temperature" value= "{{temp}}" disabled title='operating' key='operating'/>
                                    <a id='load_temp' style="display:none"><img width="25px" height="25px" style="color:#989595" src="{{url_for('static',filename='img/load1.png')}}" /></a>
                                    <div class="icon-warning"><i id='warning-temp' class="fa fa-warning" style="color:red;display:none;"></i></div>                                        
                                </div>
                            </div>
                        <!--End temp-->

                        <!-- Button save params present -->
                            <input type='text' class='setup_name_file_s' name='name_file_s' style='width:50px;display:none' />
                            <input type='number' class='number_option' name='number_option' value='' style='display:none' />                        
                        <!---- End Button Save Params ------>                                               

                        <!-- Submit at Reset button of Profile -->
                            <input type="text" id="user_name" name="user_name" value="{{username}}" style="width:50px;display:none;"/>
                            <script>
                                $('#default_option').click(function(){                                    
                                    $.ajax({
                                        type : 'POST',
                                        url : '/default_option',   
                                        data : $('.form-disable').serialize(),  
                                    })
                                    .done(function(data){                                                                                 
                                        apply_button_anable();
                                        var K_Mode = data.data['K_Mode'];
                                        var K_LD1 = data.data['K_LD1'];
                                        var K_LD2 = data.data['K_LD2'];
                                        var K_LD3 = data.data['K_LD3'];
                                        var K_LD4 = data.data['K_LD4'];
                                        var K_PULSE = data.data['K_PULSE'];
                                        var K_NRFI = data.data['K_NRFI'];
                                        var K_GAIN = data.data['K_GAIN'];
                                        var K_FAR_NEAR = data.data['K_FAR_NEAR'];
                                        var K_Threthold = data.data['K_Threthold'];
                                        var color = data.data['color'];
                                                                    
                                        $('#load_color').attr('hidden','hidden');
                                        $('.select_range').val(K_FAR_NEAR);                                        
                                        $('.seclect_color').val(color);
                                        $('#select_mode').removeAttr('style'); 
                                        if($('.mode').val() != "DEPTHIR"){
                                            $('#select_mode').val(K_Mode);
                                            if(K_Mode == "DEPTHIR"){
                                                $('#select_mode').css('color','red'); 
                                            }else if(K_Mode == "IR"){
                                                $('#ao').css('z-index','30');
                                                $('.seclect_color').css('background','#cccccc');
                                                $('.seclect_color').attr('disabled','disabled');
                                            }else if(K_Mode == "DEPTH"){
                                                $('#ao').css('z-index','10');  
                                                $('.seclect_color').css('background','#ffffff');
                                                $('.seclect_color').removeAttr('disabled');
                                            }
                                        }
                                        if(K_LD1 == "checked")
                                            $('#checkbox1').prop('checked', true);
                                        else
                                            $('#checkbox1').prop('checked', false);
                                        
                                        if(K_LD2 == "checked")
                                            $('#checkbox2').prop('checked', true);
                                        else
                                            $('#checkbox2').prop('checked', false);
                                        
                                        if(K_LD3 == "checked")
                                            $('#checkbox3').prop('checked', true);
                                        else
                                            $('#checkbox3').prop('checked', false);
                                        
                                        if(K_LD4 == "checked")
                                            $('#checkbox4').prop('checked', true);
                                        else
                                            $('#checkbox4').prop('checked', false);
                                        
                                        K_GAIN = parseInt(K_GAIN);
                                        $('#demo_gain').val(K_GAIN);
                                        $('#myRange_gain').val(K_GAIN);
                                        K_PULSE = parseInt(K_PULSE);
                                        $('#demo_pulse').val(K_PULSE);
                                        $('#myRange_pulse').val(K_PULSE);
                                        K_Threthold = parseInt(K_Threthold);
                                        $('#demo_coring').val(K_Threthold);
                                        $('#myRange_coring').val(K_Threthold);
                                        if(K_NRFI == "checked")
                                            $('#LOAD_K_NRFI').prop('checked', true);
                                        else
                                            $('#LOAD_K_NRFI').prop('checked', false);       
                                        var set = document.getElementById('set');
                                        //set.click();
                                        $('#reset_counter').mouseenter();
                                    })
                                })
                            </script>
                        <!-- End Submit at Reset button of Profile -->

                        <!--Delete option-->
                            <input type='button' id='delete_option' value='Delete' style='display:none' />
                            <script>
                                $('#delete_option').click(function(){    
                                    console.log('btn delete option')              
                                    $.ajax({
                                        type : 'POST',
                                        url : '/delete_option',
                                        data : {
                                            name_remove : name_remove,
                                        }
                                    })
                                    .done(function(data) {    
                                        self_delete = data.data['self_delete'];                               
                                    })
                                })        
                            </script>
                        <!-- End Delete Option -->

                        <!-- Reload again option control of all Users-->
                            <input id='reset_counter' type='button' value='reset' style="display:none" />
                            <script>
                                $('#reset_counter').hover(function(){                               
                                    $.ajax({
                                        type : 'POST',
                                        url : '/reset_counter',
                                        data : $('.form-disable').serialize(), 
                                    })
                                    .done(function(data){ 
                                        console.log('Reset profile again after Submit')
                                        var lines = data.data['lines']   
                                        $("li").remove();
                                        if($('.language').val() == 'en'){
                                            $("#insert").append("<li id='add_profile'><span class='title_add_file_en' onClick='save_as_profile()'>Save as profile</span><img class='img_add_file' src='../static/img/save_as_profile.png' onClick='save_as_profile()'/></li>")
                                        }else if($('.language').val() == 'vn'){
                                            $("#insert").append("<li id='add_profile'><span class='title_add_file_vn' onClick='save_as_profile()'>Ghi nhớ</span><img class='img_add_file' src='../static/img/save_as_profile.png' onClick='save_as_profile()'/></li>")
                                        }else{
                                            $("#insert").append("<li id='add_profile'><span class='title_add_file_jp' onClick='save_as_profile()'>ファイルとして保存</span><img class='img_add_file' src='../static/img/save_as_profile.png' onClick='save_as_profile()'/></li>")
                                        }
                                        
                                        var i;
                                        for(i=0; i < lines.length; i++){
                                            var name = lines[i].trim();
                                            $("#insert").append("<li id='option_"+ name +"'><span id='btn_"+ name + "' title=' ' onClick='reply_click(this.id)' style='cursor:pointer;width:110px;display:inline-block'>" + name + "</span><img id='"+ name +"'src='../static/img/icon_delete.png' onclick='btn_remove(this.id)' style='height:15px;cursor:pointer;float:right;margin-top:2px;margin-right:3px'/></li>"); 
                                        }
                                        if($('li').length == 1){ 
                                            $('#insert').append('<li id="option_abc" style="text-align:center">...</li>')
                                        }
                                        
                                    });
                                });    
                                setTimeout(function(){
                                    $('#reset_counter').mouseenter();
                                    setTimeout(function(){
                                        if($('li').length == 1){
                                            $('#insert').append('<li id="option_abc" style="text-align:center">...</li>');
                                        }
                                    },550)                                
                                },500);    
                            </script>
                        <!-- End Reload again option control of all Users -->

                        <!-- Auto updata profile when add or remove option -->
                            <input id='update' type='button' value='Update' style='display:none' />
                            <script>
                                $(document).ready(function(){
                                    setInterval(function(){
                                        $('#update').mouseenter();
                                    },1000)
                                });
                                $('#update').hover(function(){
                                    $.ajax({
                                        type : 'POST',
                                        url : '/update',
                                    })
                                    .done(function(data) {                                            
                                        var flg_reset_option = data.data['flg_reset_option'];         
                                        //console.log(flg_reset_option) 
                                        if(flg_reset_option & self_insert != 'self' & self_delete != 'self'){
                                            setTimeout(function(){
                                                console.log('Reset Counter');
                                                $('#reset_counter').mouseenter();
                                            },1000)  
                                        };    
                                        
                                        if(!flg_reset_option & (self_insert == 'self' | self_delete == 'self')){
                                            console.log("self --> null");
                                            setTimeout(function(){
                                                $.ajax({
                                                    type : 'POST',
                                                    url : '/flg_reset_option_to_false',     
                                                }).done(function(data) { 
                                                    self_insert = 'null';
                                                    self_delete = 'null';
                                                })                                                  
                                            },1000);
                                        }   
                                    });
                                });
                            </script>
                        <!-- End Auto updata profile when add or remove option -->

                        <!-- Submit option in profile -->
                            <input type='button' id='submit_s' value='OK'  style='display:none'/>
                            <script>
                                $('#submit_s').click(function(){    
                                    console.log('--- Submit Option ---')                        
                                    console.log($('#user_name').val())                                  
                                    $.ajax({
                                        type : 'POST',
                                        url : '/submit_s',
                                        data : {                                      
                                            name : name,
                                            user_name : $('#user_name').val(),
                                        } 
                                    })
                                    .done(function(data) {                                        
                                        apply_button_anable();
                                        var K_Mode = data.data['K_Mode'];
                                        var K_LD1 = data.data['K_LD1'];
                                        var K_LD2 = data.data['K_LD2'];
                                        var K_LD3 = data.data['K_LD3'];
                                        var K_LD4 = data.data['K_LD4'];
                                        var K_PULSE = data.data['K_PULSE'];
                                        var K_NRFI = data.data['K_NRFI'];
                                        var K_GAIN = data.data['K_GAIN'];
                                        var K_FAR_NEAR = data.data['K_FAR_NEAR'];
                                        var K_Threthold = data.data['K_Threthold'];
                                        var color = data.data['color'];
                                                                    
                                        $('#load_color').attr('hidden','hidden');
                                        $('.select_range').val(K_FAR_NEAR);                                        
                                        $('.seclect_color').val(color);
                                        $('#select_mode').removeAttr('style'); 
                                        
                                        if($('.mode').val() != "DEPTHIR"){
                                            $('#select_mode').val(K_Mode);
                                            if(K_Mode == "DEPTHIR"){
                                                $('#select_mode').css('color','red'); 
                                                $('#ao').css('z-index','10');  
                                                $('.seclect_color').css('background','#ffffff');
                                                $('.seclect_color').removeAttr('disabled');
                                            }else if(K_Mode == "IR"){
                                                $('#ao').css('z-index','30');
                                                $('.seclect_color').css('background','#cccccc');
                                                $('.seclect_color').attr('disabled','disabled');
                                            }else if(K_Mode == "DEPTH"){
                                                $('#ao').css('z-index','10');  
                                                $('.seclect_color').css('background','#ffffff');
                                                $('.seclect_color').removeAttr('disabled');
                                            }
                                        }

                                        if(K_LD1 == "checked")
                                            $('#checkbox1').prop('checked', true);
                                        else
                                            $('#checkbox1').prop('checked', false);
                                        
                                        if(K_LD2 == "checked")
                                            $('#checkbox2').prop('checked', true);
                                        else
                                            $('#checkbox2').prop('checked', false);
                                        
                                        if(K_LD3 == "checked")
                                            $('#checkbox3').prop('checked', true);
                                        else
                                            $('#checkbox3').prop('checked', false);
                                        
                                        if(K_LD4 == "checked")
                                            $('#checkbox4').prop('checked', true);
                                        else
                                            $('#checkbox4').prop('checked', false);
                                        
                                        K_GAIN = parseInt(K_GAIN);
                                        $('#demo_gain').val(K_GAIN);
                                        $('#myRange_gain').val(K_GAIN);
                                        K_PULSE = parseInt(K_PULSE);
                                        $('#demo_pulse').val(K_PULSE);
                                        $('#myRange_pulse').val(K_PULSE);
                                        K_Threthold = parseInt(K_Threthold);
                                        $('#demo_coring').val(K_Threthold);
                                        $('#myRange_coring').val(K_Threthold);
                                        if(K_NRFI == "checked")
                                            $('#LOAD_K_NRFI').prop('checked', true);
                                        else
                                            $('#LOAD_K_NRFI').prop('checked', false);       
                                        var set = document.getElementById('set');
                                        //set.click();
                                        $('#reset_counter').mouseenter();
                                    })
                                })
                            </script>
                        <!-- End Submit option -->

                        <!--  submit -->
                            <div class="frame_apply">                            
                                <div class="load_apply"></div>                          
                                <input id='submit' type='button' title="" key="apply" disabled />
                                <img id="bell" src='../static/img/icon_bell.png' style='position:absolute;top:-2;right:2;display:none' />
                            </div>
                        <!-- End submit-->
                    </form>  
                    <!-- Infor submit multi user -->
                        <span id='sys_working' title="" key="sys_working"></span>
                    <!-- End Infor submit multi user -->                         
                </div> 
            <!-- End Setting Camera -->
        </div>

            <!-- Upload parameters CPU every seconds -->
                <input class="cpu" type="text" value="" disabled />
                <button id="upload_cpu" style="display: none">upload cpu</button><br>
                <script>
                    setInterval(function(){
                        $('#upload_cpu').mouseenter();                          
                    },1000)
                </script>
            <!-- End Upload parameters CPU every seconds -->

            <!-- Control brightness -->
                <div class="rightness" style="height: 37px;width:400px;float:left;position:relative;margin-top:7px">
                    <span style="margin-left:5px;margin-top:10px;display:inline-block;font-family:Arial;font-weight:bold;height:25px;width:auto;border: 1px solid #fff;float:left" title="" key="Brightness"></span><br>
                    <div class="fra_brightness" style="width:260px;position:relative;height:33px;float:right;margin-top:-14px">
                        <input disabled type="number" min="-100" max="100" id="brightness_number" style="text-align:right;height:30px;width:45px;font-size:15px;border:none;display:block;float:left;background:none" />
                        <input id="exposure" class="slider" type="range" min="-100" max="100" value="0" style="width:206px;display:block;float:left;margin-top:8px;margin-left:5px">                        
                        <div id="set" style="width:3px;height:26px;background:#A2A0A0;left:147;top:3;position:absolute;cursor:pointer;z-index:1"></div>
                    </div>
                    
                </div>
            
                <script>
                    $(document).ready(function(){
                        $("#exposure").change(add_filter).mousemove(add_filter);
                    });

                    function add_filter(){
                        var exposure_val = $("#exposure").val();
                        var exposure_val = Number(exposure_val);
                        
                        if(exposure_val != 0){
                            $('#set').show();
                        }else{
                            $('#set').hide();
                        }
                        var exposure_val = exposure_val + 100;     
                        
                        //$(".iv-image-view,.iv-snap-image-wrap").css("-webkit-filter","brightness("+exposure_val+"%)");
                        $(".iv-image-view,.iv-image-view-ss").css("-webkit-filter","brightness("+exposure_val+"%)");
                    }

                    var sliders = document.getElementById("exposure");
                    var outputs = document.getElementById("brightness_number");
                    outputs.value = sliders.value;

                    sliders.oninput = function() {
                        outputs.value = this.value;
                    }
                    outputs.oninput = function() {
                        sliders.value = this.value;
                    }               
                </script>
                
                <script>                
                    $(document).ready(function() {
                        $('#set').click(function(){
                            $(this).hide();
                            $('#exposure').val(0);
                            $('#brightness_number').val(0);                           
                            add_filter();
                        })
                        setTimeout(function(){
                            $('#set').click();
                        },300)
                    })       
                </script>
            <!-- End Control brightness -->
            
            <br>
                                  
            <!-- Button load new value of all parameters -->
                <button id="load_params" style="display:none">upload params</button>
            <!-- End Button load new value of all parameters -->
            
            <!-- Record video -->
                <div id="recorder">
                
                    <button id="stop_record"><img id='stop_rc1' src='../static/img/icon_stop4.png' style='width:20px;position:absolute;left:0;top:2' /><img id='stop_rc' src='../static/img/icon_stop2.png' style='width:20px;position:absolute;left:0;top:2;z-index:10' />STOP</button>
                    <button id="record"><img id='rc1' src='../static/img/icon-record1.png' style='width:20px;position:absolute;left:0;top:2' /><img id='rc' src='../static/img/icon-record.png' style='width:20px;position:absolute;left:0;top:2;z-index:20' />REC</button>
                    <div id='fra_second' style='margin-top:27px;position:relative;width:120px;height:25px'>
                        <span id='title_second' style='height:25px;width:55px;position:absolute;left:0;line-height: 25px;display:none'>Time</span>
                        <input type='text' id='second' value='' disabled/>
                    </div>
                    <div id='fra_size_file' style='width:120px;height:25px;position:relative;'>
                        <span id='title_size_file' style='height:25px;width:55px;position:absolute;left:0;line-height: 25px;display:none'>Size</span>
                        <input type='text' id='size_file' value='' style='height:25px;width:70px;position:absolute;right:0;top:0;line-height:22px;text-align:center;border:none;display:none;color:#0074E8;font-weight:bold' />
                    </div>
                    <div id='fra_btn_download'style="width:120px;height:25px;position:relative;" >
                        <a id="download" style='font-weight:bold;display:none'>Download Video</a>
                        <img id='remove_download' src='../static/img/delete.png' style='display:none;height:15px;position:absolute;right:-20;top:2;cursor:pointer' />
                    </div>
                  
                    <div id='infor_record'></div>
                    <input type='text' id='loop_user_login' title="" key="err_record" value='' />                                           
                    
                    <div id="fra_option_maximum_file">
                        <div id="title">Option parameter file:</div>
                        <div id="frame_option_rc">
                            <div class="wrapper">
                                <div class="radio">
                                    <input id="size" type="radio" name="size" value="50" checked>
                                    <label for="size" class='op_rc'>50 MB</label>  
                                </div>
                                <div class="radio">
                                    <input id="size1" type="radio" name="size" value="100">
                                    <label for="size1" class='op_rc'>100 MB</label>
                                </div>
                            </div>
                            <div class="wrapper">
                                <div class="radio">
                                    <input id="fps" type="radio" name="fps" value="20" checked>
                                    <label for="fps" class='op_rc'>20 fps/s</label>  
                                </div>
                                <div class="radio">
                                    <input id="fps1" type="radio" name="fps" value="30">
                                    <label for="fps1" class='op_rc'>30 fps/s</label>
                                </div>
                            </div>
                        </div>

                        <button id="request_rc">OK</button>
                    </div>
                    
                </div>                
                <script>            
                var size_number = 52428800;
                var fps_number;
                    $(function(){   
                        var splitRc = $('#recorder');
                        $('#record').click(function(){                              
                            $('#size_file,#title_size_file').hide();
                            $('#download').hide();
                            $('#second,#title_second').hide();
                            $('#remove_download').hide();
                            //console.log(0)                                                     
                            if(!splitRc.hasClass('opens')){
                                splitRc.addClass('opens')
                                //console.log(1)
                            }else{
                                splitRc.removeClass('opens');
                                //console.log(2)                            
                            }
                        })
                    
                        $('#recorder').click(function(event){                            
                            if(splitRc.hasClass('opens')){
                                event.stopPropagation();
                                //console.log(3)
                            }                            
                        });

                        $('html').on('click',function() {
                            if(splitRc.hasClass('opens')){                               
                                splitRc.removeClass('opens'); 
                                //console.log(4)                                  
                            }
                        })
                       
                        $('#request_rc').click(function(){                           
                            self_record = true;
                            $('#record').hide();
                            if(splitRc.hasClass('opens')){                               
                                splitRc.removeClass('opens'); 
                                console.log(4)                                  
                            }
                            $('#stop_record').show();
                            $('#size_file').show().val('0.0(MB)');
                            $('#title_size_file').show();
                            //$('#frame_record').hide();
                            $('#second').show().val('00:00');
                            $('#title_second').show();
                            $('#download').hide();
                            $('#delete_record,#remove_download').hide();
                            second = 0;
                            j = 0;
                            //demtime();
                            
                            var size = document.getElementsByName('size');
                            for (var i = 0, length = size.length; i < length; i++) {
                            if (size[i].checked) {                                
                                //alert(size[i].value);      
                                //alert(typeof size[i].value)   //string  
                                size_number = size[i].value;   
                                if(size_number == "50"){
                                    size_number = 52428800
                                    console.log('recorder video 50MB')
                                }else{
                                    size_number = 104857600
                                    console.log('recorder video 100MB')
                                }  
                                break;
                            }
                            }
                            
                            var fps = document.getElementsByName('fps');                            
                            for (var i = 0, length = fps.length; i < length; i++) {
                            if (fps[i].checked) {                                
                                //alert(fps[i].value);    
                                //alert(typeof fps[i].value)           //string            
                                fps_number = fps[i].value;
                                break;
                            }
                            }
                            
                            //alert(size_number + 'MB, ' + fps_number + 'fps/s')
                            icon_show_hide_rc = setInterval(function(){
                                $("#stop_rc").css('z-index','10');                                
                                setTimeout(function(){
                                    $("#stop_rc").css('z-index','1');                                    
                                },1000)
                            },2000)

                            $.ajax({
                                type : 'POST',
                                url : '/record_status',
                                data : {
                                    mode_present : $('.mode').val(),
                                    user_name_web : user_name_web,
                                    status : 'true',                                    
                                    fps_number : fps_number,
                                }
                            }).done(function(data) {                                 
                                
                            })
                        })

                    
                    })
                </script>
                <!--<input type="text" id="user_name" name="user_name" value="{{username}}" style="width:50px;display:none"/>-->           
                <script>
                    var second = 0;
                    var j = 0;
                    var second_record;
                    var time;
                    var icon_show_hide_rc;

                    function demtime() {   
                        if(second < 10 ){
                            second = '0' + second;
                        }
                        if(second == 60){
                            second='00';
                            j++;
                            if(j < 10){
                                j = '0' + j
                            }
                        }
                        if(j == 0){
                            j = '00' ;
                        }
                        second_record = j + ':' + second
                        $('#second').val(second_record)
                        second++;                               
                    }

                    var namefile = $('#namefile').val();
                    var buttonRecord = document.getElementById("record");
                    var buttonStop = document.getElementById("stop_record");
                    var user_name_web = $('#user_name').val();                                      

                    $(document).ready(function () {
                        /**
                        $('#record').click(function () {
                            self_record = true;
                            $(this).hide();
                            $('#stop_record').show();
                            $('#size_file').show().val('0.0(MB)');
                            $('#title_size_file').show();
                            //$('#frame_record').hide();
                            $('#second').show().val('00:00');
                            $('#title_second').show();
                            $('#download').hide();
                            $('#delete_record,#remove_download').hide();
                            second = 0;
                            j = 0;
                            //demtime();

                            icon_show_hide_rc = setInterval(function(){
                                $("#stop_rc").css('z-index','10');                                
                                setTimeout(function(){
                                    $("#stop_rc").css('z-index','1');                                    
                                },1000)
                            },2000)

                            $.ajax({
                                type : 'POST',
                                url : '/record_status',
                                data : {
                                    mode_present : $('.mode').val(),
                                    user_name_web : user_name_web,
                                    status : 'true',
                                }
                            }).done(function(data) {                                 
                                
                            })

                        })
                        **/

                        $('#stop_record').click(function () {                   
                            selft_record = false;
                            $(this).hide();
                            $('#record').show();
                            $('#size_file,#title_size_file').show();
                            $('#download').hide();                                        
                        
                            disable_download = true;            
                            try {
                                clearTimeout(time);
                                clearInterval(icon_show_hide_rc);
                            }
                            catch(err) {                  
                            }                    
                            
                            var name_file_rc = Math.random().toString(36).substring(7);
                            name_file_rc = 'TOF-' + name_file_rc
                            console.log(name_file_rc)

                            $.ajax({                                
                                type : 'POST',
                                url : '/record_status',
                                data : {                                   
                                    status : 'false',
                                    name_file_rc : name_file_rc,
                                }
                            }).done(function(data) {                                 
                                var disable_download_app = data.data['disable_download_app'];
                                    if(disable_download & disable_download_app){   
                                        setTimeout(function(){
                                            $('#remove_download').show();                                        
                                            $('#download').show(); 
                                        },200)                                                                                                                     
                                        $('#download').attr('href', "/static/" + name_file_rc + ".avi");  
                                        $('#download').attr('target','_blank');                                      
                                        $("#delete_record").show();

                                        /*
                                        $("#namefile").keyup(function(event) {
                                            if (event.keyCode === 13) {
                                                $('#update_record').click();
                                            }
                                        });  */          
                                            
                                    }
                            })
                        })

                        $('#delete_record,#remove_download').click(function () {
                            $('#size_file,#title_size_file').hide();
                            $('#second,#title_second').hide();
                            $('#frame_record').hide();
                            $('#download').hide();
                            $(this).hide();
                        })

                        /* Rename name file rc */
                        /*
                        $('#update_record').click(function(){
                            $('#size_file').hide();
                            $('#frame_record').hide();
                            $('#download').show();
                            $('#remove_download').show();
                            $.ajax({
                                type : 'POST',
                                url : '/update_record',
                                data : {
                                namefile : $('#namefile').val()
                                }
                            }).done(function(data) { 
                                var namefile = $('#namefile').val();
                                $("#delete_record").show();
                                $('#download').text('Download')
                                $('#download').attr('href', "/static/" + namefile + ".avi");                                                                                     
                            })
                        })*/

                        
                        $('#download').click(function () {
                            console.log('Press Download Button') 
                            console.log(both_ir_depth_btn_press)
                            btn_download_press = true;
                            ////////////////////////////////////////    
                            /*
                            if($('.mode').val() == 'IR' || $('.mode').val() == 'DEPTH'){
                                try {
                                    stopTimeout();                                       
                                }
                                catch(err) {   
                                    console.log(err)                 
                                }   
                                
                                $('#my1').remove();
                                
                                var x = document.createElement("div");        
                                x.setAttribute("id",'my1');
                                document.getElementById("my").appendChild(x);

                                $('#my_video').remove();
                                var y = document.createElement("img");
                                y.setAttribute("src","{{ url_for('video_feed') }}");
                                y.setAttribute("id",'my_video');
                                document.getElementById("my1").appendChild(y);                      
                    
                                var _img = document.getElementById('my_video');
                                var newImg = new Image;
                                newImg.onload = function() {
                                    _img.src = this.src;
                                }
                                newImg.src = "{{ url_for('video_feed') }}";   //Hình ảnh vẫn chạy nhưng zoom sẽ khựng khựng   
                                                                                                    
                                setTimeout(function() {
                                    var viewer = ImageViewer($('#my_video'), {});      
                                    window.viewer = viewer;  

                                    startTimeout();  
                                    $('#slider_zoom_ss,#number_zoom_ss').val(100);
                                    mode_zoom == 'btn_video';
                                    elem = document.getElementById('my1');
                                },1500)                        

                               
                            }else{
                                $('#btn_ir,#btn_depth,#divide_screen').removeAttr('disabled');
                                setTimeout(function(){                                    
                                    if(both_ir_depth_btn_press == 'depth'){                             
                                        $('#btn_depth').click();
                                    }else if(both_ir_depth_btn_press == 'ir'){                                
                                        $('#btn_ir').click();
                                    }else if(both_ir_depth_btn_press == 'both'){                                                                       
                                        $('#hang1,#hang2,.img-comp-slider').remove();
                                        document.getElementById("divide_screen").click();
                                    }
                                },1500)                                
                            } 
                            */

                            $('#size_file,#title_size_file').hide();
                            $(this).hide();
                            $('#second,#title_second').hide();
                            $('#remove_download').hide();
                            disable_download = false;

                            /*
                            setTimeout(function(){
                                location.reload();
                            },2000)
                            */
                            
                        })     

                        /*
                        $('h3').click(function(){
                            console.log('Click h3')
                            $.ajax({
                                type : 'POST',
                                url : '/done',                                
                            }).done(function(data) {                                
                            })
                        })*/               
                        
                    })         

                </script>
               
                <button onclick="location.reload();" id='refresh_page' style='display:none' >Refresh Page</button>                

            <!-- End record -->

            <!-- Zooming -->
                <script>                      
                    var inter = null;
                    var inter1 = null;
                    var inter2 = null;
                    var inter3 = null;
                    var rate;
                    var rate_ir;                   

                    function startTimeout(){
                        var orig = null;
                        var mode_zoom_depthir = $('.mode').val();
                        inter = setTimeout(function(){                       
                            console.log('welcome');
                            orig = $('.iv-large-image').width();
                            //orig = 640;
                            console.log('orig: ' + orig );
                            
                            inter1 = setInterval(function(){
                                if(hover_my | hover_slider_zoom){                                                            
                                    var scale = $('.iv-large-image').width();
                                    
                                    scale = scale * 100 / orig;
                                    scale = Math.round(scale);
                                    //console.log(scale)
                                            
                                    rate = $('.scale_zoom').text();
                                    rate = parseInt(rate);                       
                                
                                    if ((mouse_hover_depth & show_snap_view) | (!show_snap_view & hover_my & !hover_hang2)){
                                        //console.log('Before')
                                        if (isNaN(rate)) {
                                            $('#slider_zoom_ss,#number_zoom_ss').val(100); 
                                        }else{
                                            $('#slider_zoom_ss,#number_zoom_ss').val(rate);
                                            if(mode_zoom_depthir == 'DEPTHIR'){
                                                viewerss.zoom(rate)  
                                                //console.log(rate_ir)
                                            }                                                                                                                       
                                        }                                                                                                                                                                                                                     
                                    }else if(!show_snap_view & hover_my & both_ir_depth_btn_press != 'both'){
                                        //console.log('After')
                                        if (isNaN(rate)) {
                                            $('#slider_zoom_ss,#number_zoom_ss').val(100); 
                                        } else{
                                            $('#slider_zoom_ss,#number_zoom_ss').val(rate);                                        
                                        }     
                                    }                                                              

                                    if(scale == 100 ){
                                        $('.iv-snap-view').hide();
                                        $('#my1,#my2,#my').mouseenter(function(){
                                            $('.iv-snap-view').hide();                                        
                                        })
                                    }
                                    
                                    if(scale != rate){
                                        $('.scale_zoom').text(scale + '%');
                                        if(scale != 100){
                                            $('.iv-snap-view').show();
                                            $('.scale_zoom').show();
                                        
                                            if(!show_snap_view){
                                                $('#my').mouseleave(function(){
                                                    $('.iv-snap-view').hide();                                                
                                                })
                                                $('#my').mouseenter(function(){
                                                    $('.iv-snap-view').show();                                                                                                
                                                })
                                            }                                                                                   
                                        }       
                                    }else{                                    
                                        $('.scale_zoom').fadeOut(1000);
                                    }
                                }
                            }, 100)
                        })   

                    };

                    function startTimeout_mode_ir(){
                        var orig_ir = null;                       
                        inter2 = setTimeout(function(){
                            console.log('welcome');
                            orig_ir = $('.iv-large-image-ss').width();
                            //orig = 640;
                            console.log('orig: ' + orig_ir );
                            
                            inter3 = setInterval(function(){    
                                if(hover_my | hover_slider_zoom){                                                    
                                    var scale = $('.iv-large-image-ss').width();                                    
                                    scale = scale * 100 / orig_ir;
                                    scale = Math.round(scale);
                                    //console.log(scale)
                                            
                                    rate_ir = $('.scale_zoom_ir').text();
                                    rate_ir = parseInt(rate_ir);
                                                                    
                                    if ((mouse_hover_ir & show_snap_view) | (!show_snap_view & hover_hang2)){                                    
                                        if (isNaN(rate_ir)) {
                                            $('#slider_zoom_ss,#number_zoom_ss').val(100); 
                                        } else{
                                            $('#slider_zoom_ss,#number_zoom_ss').val(rate_ir);
                                            viewer.zoom(rate_ir);
                                        }                                                                                                                                                                                                                                        
                                    }
                                    
                                    if(scale == 100){
                                        $('.iv-snap-view-ss').hide();
                                        $('#my').mouseenter(function(){
                                            $('.iv-snap-view-ss').hide(); 
                                            //$('.iv-snap-view').hide();
                                        })
                                    }                                   
                                    
                                    if(scale != rate_ir){
                                        $('.scale_zoom_ir').text(scale + '%');
                                        if(scale != 100){
                                            $('.iv-snap-view-ss').show();
                                            $('.scale_zoom_ir').show();
                                            /* Show and Hide .iv-snap-view and .iv-snap-view-ss */                                                                                                              
                                            $('#my').mouseleave(function(){
                                                $('.iv-snap-view-ss').hide();  
                                                $('.iv-snap-view').hide();                                                                                      
                                            })
                                            $('#my').mouseenter(function(){
                                                $('.iv-snap-view-ss').show();    
                                                $('.iv-snap-view').show();                                                                                               
                                            })    
                                                                                                                                            
                                        }       
                                    }else{
                                        $('.scale_zoom_ir').fadeOut(1000);
                                    }
                                }
                            }, 100)
                        })   

                    };

                    function stopTimeout(){
                        clearTimeout(inter);
                        clearInterval(inter1);
                    };

                    function stopTimeout_mode_ir(){
                        clearTimeout(inter2);
                        clearInterval(inter3);
                    };

                </script>           
                                                                                             
            <!-- End Zooming -->  

            <!--  Test thử khi load in vào giá trị trong dropdown sẽ tự động chọn chứ ko chèn chuỗi như hiện tại-->
                <script>
                    $(document).ready(function(){                   
                        var range_option = $('.select_range').val();
                        if(range_option == '300mm-1000mm'){
                            $('option[value=' + range_option + ']').prop('selected', true);
                        }else{
                            $('option[value="1000mm-5000mm"]').prop('selected', true);
                        }
                        var mode_option = $('.select_mode').val();
                        //console.log(mode_option)

                        $('#slider_zoom_ss,#number_zoom_ss').val(100);
                        if(mode_option == 'IR'){                                                                                   
                            $('option[value=' + mode_option + ']').attr('selected', true);
                            $('#btn_ir').attr('disabled','disabled').css('background','#A3D272').css('border','1px solid #A3D272');
                            $('#btn_depth').attr('disabled','disabled').css('color','#A0A0A0').css('border','1px solid #F0F0F0').css('box-shadow','none'); 
                            $('#extend_mode').css('opacity','0.5');
                        }else{
                            if(mode_option == 'DEPTH'){                                                                                  
                                $('option[value="DEPTH"]').attr('selected', true);  
                                $('#btn_depth').attr('disabled','disabled').css('background','#A3D272').css('border','1px solid #A3D272');
                                $('#btn_ir').css('color','#A0A0A0').attr('disabled','disabled').css('border','1px solid #F0F0F0');
                                $('#extend_mode').css('opacity','0.5');
                            }else if(mode_option == 'DEPTHIR'){   
                                $('#control_bar_s').css('z-index','-1');
                                $('#my1').remove();  
                                //console.log('Mode DEPTH IR')
                                both_ir_depth_btn_press = 'both';                                                
                                $('#extend_mode').css('opacity','1');             
                                $('option[value="DEPTHIR"]').attr('selected', true);                              
                                $('#btn_depth').removeAttr('style').removeAttr('disabled');
                                $('#btn_ir').removeAttr('style').removeAttr('disabled'); 
                                $('#divide_screen').removeAttr('style').css('background','#A3D272').attr('disabled','disabled'); 
                                $('#divide_screen').show(); 
                                $('#select_mode').css('color','red');
                                $('option').css('color','#000');                                                                
                            }                                                        
                        }
                        var color_option = $('.seclect_color').val();
                            if(color_option == 'AUTUMN'){
                                $('option[value=' + color_option + ']').prop('selected', true);
                            }else if(color_option == 'HOT'){
                                $('option[value=' + color_option + ']').prop('selected', true);
                            }else if(color_option == 'SPRING'){
                                $('option[value=' + color_option + ']').prop('selected', true);
                            }else{
                                $('option[value=' + color_option + ']').prop('selected', true);
                            }
                        
                        /** Load Zoom **/
                        $(function test() {   
                            setTimeout(function(){                                
                                if($('.mode').val() == 'IR' || $('.mode').val() == 'DEPTH'){      
                                    $('#img_ready,#hang1,#hang2').remove();
                                    $('#divide_screen').hide(); 
                                    $("#my1").css('opacity','1')    
                                    setTimeout(function(){
                                        var viewer = ImageViewer($('#my_video'), {snapView: true,})                                            
                                        window.viewer = viewer;    
                                
                                        $('#slider_zoom_ss,#number_zoom_ss').val(100);                
                                        var slider_zoom = document.getElementById("slider_zoom_ss");
                                        var output_zoom = document.getElementById("number_zoom_ss");                        
                                                        
                                        output_zoom.value = slider_zoom.value;
                                                        
                                        slider_zoom.oninput = function() {
                                            viewer.zoom(slider_zoom.value);                                         
                                            output_zoom.value = this.value;
                                            
                                            if(show_snap_view){
                                                viewerss.zoom(slider_zoom.value); 
                                            }                                                                                                      
                                        }
                                    },100)                                                                 
                                    
                                    setTimeout(function(){
                                        startTimeout();    
                                    },200)
                                     
                                    setTimeout(function(){
                                        $('#my_video').attr('src','../static/ready.jpg');
                                    },1500)                               
                                }         
                                else{
                                    //console.log('Mode DEPTHIR')                                                                                                                                       
                                    /* Xoa my1, my2 tao lai hang1, hang2 va xoa zoom */
                                    //both_depthir();                                    

                                    /* Add zoom cho BOTH */                                    
                                    setTimeout(function(){     
                                        var viewer = ImageViewer($('#frame_my_video_ao'), {snapView: true,});      
                                        window.viewer = viewer;                                                                          
                                       
                                        setTimeout(function(){      
                                            var viewerss = ImageViewerss($('#my_video_2_ao'), {snapView: true,});      
                                            window.viewerss = viewerss;    
                                                            
                                            var slider_zoom = document.getElementById("slider_zoom_ss");
                                            var output_zoom = document.getElementById("number_zoom_ss");
                                            output_zoom.value = slider_zoom.value;  

                                            slider_zoom.oninput = function() {
                                                viewer.zoom(slider_zoom.value);                                         
                                                output_zoom.value = this.value;                                                                
                                                viewerss.zoom(slider_zoom.value);                                                          
                                            } 
                                        },100)
                                    },200)                              
                                    
                                    setTimeout(function(){
                                        var add_zoom_ir = document.createElement('div');
                                        add_zoom_ir.setAttribute("id",'scale_zoom_ir');
                                        add_zoom_ir.setAttribute("class",'scale_zoom_ir');
                                        add_zoom_ir.innerHTML = 100 + '%';
                                        document.getElementById("hang2").appendChild(add_zoom_ir); 
                                        $('#scale_zoom_ir').css('z-index','-999').css('opacity','0');      
                                        startTimeout_mode_ir();                                        
                                    },400)         

                                    setTimeout(function(){
                                        $('#scale_zoom_s').remove();
                                        var add_zoom_depth = document.createElement('div');
                                        add_zoom_depth.setAttribute("id",'scale_zoom_s');
                                        add_zoom_depth.setAttribute("class",'scale_zoom');
                                        add_zoom_depth.innerHTML = 100 + '%';
                                        document.getElementById("hang1").appendChild(add_zoom_depth); 
                                        $('#scale_zoom_s').css('z-index','-999').css('opacity','0');      
                                        startTimeout();  
                                    },500)
                                    
                                    /* Chay thuoc tinh divide */                                    
                                    setTimeout(function(){
                                        initComparisons();                                         
                                        $('#img_ready').remove();
                                        $('#hang1,#hang2').css('opacity','1');                                                                               
                                    },600)                                    
                                                                                                                                     
                                /*
                                    var add_zoom_ir = document.createElement('div');
                                        add_zoom_ir.setAttribute("id",'scale_zoom_ir');
                                        add_zoom_ir.setAttribute("class",'scale_zoom_ir');
                                        add_zoom_ir.innerHTML = 100 + '%';
                                        document.getElementById("hang2").appendChild(add_zoom_ir); 
                                        

                                    var add_zoom_depth = document.createElement('div');
                                        add_zoom_depth.setAttribute("id",'scale_zoom_s');
                                        add_zoom_depth.setAttribute("class",'scale_zoom');
                                        add_zoom_depth.innerHTML = 100 + '%';
                                        document.getElementById("hang1").appendChild(add_zoom_depth); 
                                           
                                    
                                    setTimeout(function(){
                                        var viewerss = ImageViewerss($('#my_video_2_ao'), {snapView: true,});      
                                        window.viewerss = viewerss; 
                                        $('#scale_zoom_ir').css('z-index','-999').css('opacity','0');                                                 
                                        startTimeout_mode_ir();                                      
                                    },500)
                                */   

                                    /* Chay thuoc tinh divide */
                                /*
                                    setTimeout(function(){
                                        initComparisons(); 
                                        setTimeout(function(){
                                            $('#img_ready').remove();
                                            $('#hang1,#hang2').css('opacity','1');
                                        },100)                                           
                                    },550)                                    

                                    setTimeout(function(){
                                        var viewer = ImageViewer($('#frame_my_video_ao'), {snapView: true,});      
                                        window.viewer = viewer;
                                        $('#scale_zoom_s').remove();
                                        $('#scale_zoom_s').css('z-index','-999').css('opacity','0');
                                        startTimeout(); 
                                        $('.iv-large-image-ss,.iv-snap-image-ss').attr("src","{{ url_for('video_feed') }}");
                                        var slider_zoom = document.getElementById("slider_zoom_ss");
                                        var output_zoom = document.getElementById("number_zoom_ss");
                                        output_zoom.value = slider_zoom.value;  

                                        slider_zoom.oninput = function() {
                                            viewer.zoom(slider_zoom.value);                                         
                                            output_zoom.value = this.value;                                                                
                                            viewerss.zoom(slider_zoom.value);                                                          
                                        } 
                                    },600)
                                */                                                                                                                                                                                                                 
                                    setTimeout(function(){
                                        $('#my_video_2_ao,#frame_my_video_ao').attr('src','../static/ready.jpg')
                                    },2000)                                                                                                                                                                                                         
                                    hover_hang2_depthir();   
                                    $('option[value="IR"]').attr('disabled','disabled').css('background','#ccc'); 
                                    $('option[value="DEPTH"]').attr('disabled','disabled').css('background','#ccc');                                                                                              
                                }                                                                                       
                            },1000)      
                        }); 
                    })
                </script>
            <!-- In the end -->

            <!-- Frame slider Zoom In and Zoom Out -->
                <div id="fra_slider_zoom">
                    <div class="title_zoom" title="" key="Zoom"></div>
                    <div class="fra_zoom_and_number" id='fra_zoom_and_number'>
                        <input type='number' id='number_zoom_ss' min=100 max=300 value=100 disabled/>
                        <input type='range' class='slider' id='slider_zoom_ss' min=100 max=300 value=100/>
                    </div>
                </div>                      
            <!-- End Frame slider Zoom In and Zoom Out -->

            <!-- FullScreen-->
                <script>
                        var ir_depth_icon_full_press;                        
                        var elem = document.getElementById('my1');

                        function openFullscreen() {
                            ir_depth_icon_full_press = 'icon_full_depth';
                            stopTimeout();                                
                            setTimeout(function(){
                                elem.requestFullscreen(); 
                            },200)                                                         
                        }

                        function closeFullscreen() {                            
                            console.log('icon_exit_depth___________________')
                            setTimeout(function(){
                                document.exitFullscreen();     
                            },200)                          
                        }

                        function openFullscreen_ir() {
                            ir_depth_icon_full_press = 'icon_full_ir';
                            stopTimeout_mode_ir();
                            setTimeout(function(){
                                document.getElementById('my2').requestFullscreen();                                
                            },200)                                                         
                        }

                        function closeFullscreen_ir() {                            
                            console.log('icon_exit_ir___________________')
                            setTimeout(function(){
                                document.exitFullscreen();     
                            },200)                          
                        }

                        $(document).bind('webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange', function() {
                            var isFullScreen =  document.fullScreen |
                                                document.mozFullScreen |
                                                document.webkitIsFullScreen | (document.msFullscreenElement != null);             
                            if (isFullScreen) {                                                  
                                console.log('fullScreen!');  
                                viewer.refresh();
                                try{                                   
                                    viewerss.refresh()
                                }catch(err) {
                                    console.log(err)
                                }
                                
                                console.log(ir_depth_icon_full_press)  
                                stopTimeout();
                                stopTimeout_mode_ir();
                                if(ir_depth_icon_full_press == 'icon_full_depth'){                                                          
                                    var add = document.getElementById('control_bar_s');                            
                                    var add_1 = document.getElementById('scale_zoom_s');
                                    if(mode_zoom == 'btn_video'){
                                        document.getElementById("my1").appendChild(add);
                                        document.getElementById("my1").appendChild(add_1);
                                    }else{                                
                                        document.getElementById("my2").appendChild(add);
                                        document.getElementById("my2").appendChild(add_1);
                                    }
                                    stopTimeout();
                                    setTimeout(function(){
                                        startTimeout();
                                    },500)      
                                }else if(ir_depth_icon_full_press == 'icon_full_ir'){
                                    var add = document.getElementById('control_bar_s_ir');                            
                                    var add_1 = document.getElementById('scale_zoom_ir');
                                    document.getElementById("my2").appendChild(add);
                                    document.getElementById("my2").appendChild(add_1);

                                    stopTimeout_mode_ir();
                                    setTimeout(function(){
                                        startTimeout_mode_ir();
                                    },500) 
                                }

                                $('.closefull,.closefull_ir').show();
                                $('.full,.full_ir').hide();  

                            } else {  
                                console.log('no fullScreen!');  
                                viewer.refresh();
                                try{                                    
                                    viewerss.refresh()
                                }catch(err) {
                                    console.log(err)
                                }

                                console.log(ir_depth_icon_full_press);
                                if(ir_depth_icon_full_press == 'icon_full_depth'){
                                    var add = document.getElementById('control_bar_s');     
                                    var add_1 = document.getElementById('scale_zoom_s');
                                    document.getElementById("my").appendChild(add);
                                    document.getElementById("my").appendChild(add_1);
                                    if(show_snap_view){
                                        try {
                                            stopTimeout(); 
                                            if((both_ir_depth_btn_press == 'both') | show_snap_view){
                                                stopTimeout_mode_ir(); 
                                            }                                                                                               
                                        }
                                        catch(err) {   
                                            console.log(err)                 
                                        }     
                                        if(mode_zoom == 'btn_video'){
                                            $('#scale_zoom_s').remove();
                                            var add_zoom_depth = document.createElement('div');
                                            add_zoom_depth.setAttribute("id",'scale_zoom_s');
                                            add_zoom_depth.setAttribute("class",'scale_zoom');
                                            add_zoom_depth.innerHTML = 100 + '%';
                                            document.getElementById("my1").appendChild(add_zoom_depth);   
                                            //startTimeout();
                                        }else if(mode_zoom == 'btn_video_2'){
                                            $('#scale_zoom_s').remove();
                                            var add_zoom_ir = document.createElement('div');
                                            add_zoom_ir.setAttribute("id",'scale_zoom_s');
                                            add_zoom_ir.setAttribute("class",'scale_zoom');
                                            add_zoom_ir.innerHTML = 100 + '%';                 
                                            document.getElementById("my2").appendChild(add_zoom_ir);
                                            //startTimeout();
                                        }
                                    }
                                    stopTimeout();
                                    setTimeout(function() {
                                        startTimeout();
                                        if((both_ir_depth_btn_press == 'both') | show_snap_view){
                                            startTimeout_mode_ir();
                                        }                                        
                                        $('#slider_zoom_ss,#number_zoom_ss').val(100);
                                    },500)     
                                
                                }else if(ir_depth_icon_full_press == 'icon_full_ir'){
                                    var add = document.getElementById('control_bar_s_ir');     
                                    var add_1 = document.getElementById('scale_zoom_ir');
                                    document.getElementById("my").appendChild(add);
                                    document.getElementById("my").appendChild(add_1);
                                    try {
                                        stopTimeout(); 
                                        stopTimeout_mode_ir();                                                    
                                    }
                                    catch(err) {   
                                        console.log(err)                 
                                    }   
                                    $('#scale_zoom_ir').remove();
                                    var add_zoom_ir = document.createElement('div');
                                    add_zoom_ir.setAttribute("id",'scale_zoom_ir');
                                    add_zoom_ir.setAttribute("class",'scale_zoom_ir');
                                    add_zoom_ir.innerHTML = 100 + '%';
                                    document.getElementById("my2").appendChild(add_zoom_ir); 
                                    setTimeout(function(){
                                        startTimeout();
                                        startTimeout_mode_ir();
                                        $('#slider_zoom_ss,#number_zoom_ss').val(100);
                                    },500)                                    
                                }
                                
                                $('.closefull,.closefull_ir').hide();
                                $('.full,.full_ir').show();
                                $('.scale_zoom').removeAttr('style');
                            }
                        });           
                </script>
            <!-- End FullScreen -->     
                       
    </div>
</div> 

    <!-- Footer -->
        <div class="fixed"><div class="footer"><img style="width:170px; margin-top:5px;" src="https://www.brycen.co.jp/wp-content/themes/brycen/img/logo-l.svg"/><h4 title="" key="BRYCEN Co., Ltd."></h4><h4 title='' key='footer'></h4></div></div>
        <input type='text' class='mode' value="{{K_Mode}}" style='display:none' />   
        <input type='text' class='update_params' value='Update Params' style='display:none' />            
        <a id="Reload_page" style="display:none" href="{{ url_for('login')}}">reload page</a>
        <script>
            $(document).ready(function(){
                        $('.update_params').hover(function(){
                            $.ajax({
                                type : 'POST',
                                url : '/load_params', 
                                data : {
                                    update_control_panel : 'show_snap_view',
                                }    
                            })
                            .done(function(data) {
                                apply_button_disable()
                                var K_Mode = data.data['K_Mode'];
                                var K_LD1 = data.data['K_LD1'];
                                var K_LD2 = data.data['K_LD2'];
                                var K_LD3 = data.data['K_LD3'];
                                var K_LD4 = data.data['K_LD4'];
                                var K_PULSE = data.data['K_PULSE'];
                                var K_NRFI = data.data['K_NRFI'];
                                var K_GAIN = data.data['K_GAIN'];
                                var K_FAR_NEAR = data.data['K_FAR_NEAR'];
                                var K_Threthold = data.data['K_Threthold'];
                                var color = data.data['color'];

                                $('#load_color').attr('hidden','hidden');
                                $('.select_range').val(K_FAR_NEAR);                                        
                                $('.seclect_color').val(color);
                                //$('#select_mode').removeAttr('style'); 
                                        
                                if($('.mode').val() != "DEPTHIR"){
                                    $('#select_mode').val(K_Mode);
                                    if(K_Mode == "DEPTHIR"){
                                        $('#select_mode').css('color','red'); 
                                        $('#ao').css('z-index','10');  
                                        $('.seclect_color').css('background','#ffffff');
                                        $('.seclect_color').removeAttr('disabled');
                                    }else if(K_Mode == "IR"){
                                        $('#ao').css('z-index','30');
                                        $('.seclect_color').css('background','#cccccc');
                                        $('.seclect_color').attr('disabled','disabled');
                                    }else if(K_Mode == "DEPTH"){
                                        $('#ao').css('z-index','10');  
                                        $('.seclect_color').css('background','#ffffff');
                                        $('.seclect_color').removeAttr('disabled');
                                    }
                                }

                                if(K_LD1 == "checked")
                                    $('#checkbox1').prop('checked', true);
                                else
                                    $('#checkbox1').prop('checked', false);
                                        
                                if(K_LD2 == "checked")
                                    $('#checkbox2').prop('checked', true);
                                else
                                    $('#checkbox2').prop('checked', false);
                                        
                                if(K_LD3 == "checked")
                                    $('#checkbox3').prop('checked', true);
                                else
                                    $('#checkbox3').prop('checked', false);
                                        
                                if(K_LD4 == "checked")
                                    $('#checkbox4').prop('checked', true);
                                else
                                    $('#checkbox4').prop('checked', false);
                                        
                                K_GAIN = parseInt(K_GAIN);
                                $('#demo_gain').val(K_GAIN);
                                $('#myRange_gain').val(K_GAIN);
                                K_PULSE = parseInt(K_PULSE);
                                $('#demo_pulse').val(K_PULSE);
                                $('#myRange_pulse').val(K_PULSE);
                                K_Threthold = parseInt(K_Threthold);
                                $('#demo_coring').val(K_Threthold);
                                $('#myRange_coring').val(K_Threthold);

                                if(K_NRFI == "checked")
                                    $('#LOAD_K_NRFI').prop('checked', true);
                                else
                                    $('#LOAD_K_NRFI').prop('checked', false);       
                                
                                $('#reset_counter').mouseenter();
                            })     
                })
            })
        </script>
    <!-- End Footer -->

    <!-- Display two mode -->
        <script>         
            $(document).ready(function(){      
                $('#tool').css('display','block');    
                /* Chuyen mode DEPTH */
                $('#btn_depth').click(function(){   //DEPTH
                    both_ir_depth_btn_press = 'depth';
                    mode_zoom = 'btn_video'; 
                    $('#slider_zoom_ss,#number_zoom_ss').val(100);                        
                    slider_zoom();  
                    try {
                        stopTimeout();    
                        stopTimeout_mode_ir();
                        $('#scale_zoom_ir').remove();
                        $('#hang1,#hang2,.img-comp-slider').remove();                        
                        $('.control_bar').removeAttr('style');                 
                    }
                    catch(err) {   
                        console.log(err)                 
                    }     
                    
                    $('#btn_depth').removeAttr('style').css('background-color','#A3D272').attr('disabled','disabled');
                    $('#btn_ir').removeAttr('style').removeAttr('disabled');                         
                    $('#divide_screen').removeAttr('style').removeAttr('disabled'); 

                    $('#divide_screen').show();                    

                    /* Xoa va tao lai the my1 va my2 --> gan zoom cho my1 */
                    $('#my1,#my2').remove();
                    var x = document.createElement("div");        
                    x.setAttribute("id",'my1');
                    document.getElementById("my").appendChild(x);

                    var y = document.createElement("img");
                    y.setAttribute("src","{{ url_for('video_feed') }}");
                    y.setAttribute("id",'my_video');
                    document.getElementById("my1").appendChild(y);

                    var viewer = ImageViewer($('#my_video'), {});      
                    window.viewer = viewer;                       
                    //////////////////////////////////
                    elem = document.getElementById('my1') // fullScreen -> my1                                                                                                        
                    
                    /* Thanh dieu chinh sang cho ve 0 */
                    var set = document.getElementById('set');
                    set.click();                
                                        
                    /* Tao lai gai tri hien thi % Zoom my1 */ 
                    $('#scale_zoom_s').remove();
                    var add_zoom_depth = document.createElement('div');
                    add_zoom_depth.setAttribute("id",'scale_zoom_s');
                    add_zoom_depth.setAttribute("class",'scale_zoom');
                    add_zoom_depth.innerHTML = 100 + '%';
                    document.getElementById("my1").appendChild(add_zoom_depth); 
                                    
                    setTimeout(function(){
                        startTimeout();
                    },100)
                                         
                    setTimeout(function(){
                        $('#my_video').attr('src','../static/ready.jpg');
                    },1000)

                    if(show_snap_view){ 
                        var x = document.createElement("div");                            
                        x.setAttribute("id",'my2');
                        document.getElementById("my").appendChild(x);
                        var y = document.createElement("img");
                        y.setAttribute("src","{{ url_for('video_feed_3') }}");
                        y.setAttribute("id",'my_video_2');
                        document.getElementById("my2").appendChild(y);

                        $('.control_bar_ir').show();                         
                        $('.control_bar_ir').css('top','3').css('right','3').css('z-index','20');
                        $('.control_bar').css('left','3');
                                         
                        /* Tao lai gai tri hien thi % Zoom my2 */  
                        try{
                            $('#scale_zoom_ir').remove();
                        }catch(err) {
                            console.log(err)
                        }

                        var add_zoom_ir = document.createElement('div');
                        add_zoom_ir.setAttribute("id",'scale_zoom_ir');
                        add_zoom_ir.setAttribute("class",'scale_zoom_ir');
                        add_zoom_ir.innerHTML = 100 + '%';
                        document.getElementById("my2").appendChild(add_zoom_ir); 
                                                     
                        $('.iv-snap-view').removeAttr('style');
                        $('.iv-snap-view').css('left','0')

                        var viewerss = ImageViewerss($('#my_video_2'), {});      
                        window.viewerss = viewerss;
                        setTimeout(function(){
                            startTimeout_mode_ir(); 
                        },200)
                        
                        $('.iv-snap-view-ss').css('right','0');                     
                        $('#my').mouseenter(function(){
                            $('.control_bar').show();
                            if(show_snap_view){
                                $('.control_bar_ir').show();
                            }                   
                        })
                        $('#my').mouseleave(function(){
                            $('.control_bar').hide();
                            if(show_snap_view){
                                $('.control_bar_ir').hide();
                            }                   
                        });   
                         
                        $('.iv-container').mouseenter(function(){
                            mouse_hover_depth = true;
                            //console.log(mouse_hover_depth + '----DEPTH');
                        });
                        $('.iv-container').mouseleave(function(){
                            mouse_hover_depth = false;
                            //console.log(mouse_hover_depth + '----DEPTH');
                        });

                        $('.iv-container-ss').mouseenter(function(){
                            mouse_hover_ir = true;
                            //console.log(mouse_hover_ir + '----IR');
                        });
                        $('.iv-container-ss').mouseleave(function(){
                            mouse_hover_ir = false;
                            //console.log(mouse_hover_ir + '----IR');
                        });
                        
                        setTimeout(function(){
                            $('#my_video_2').attr('src','../static/ready.jpg');
                        },1000)
                    }                                                                                                   
                })

                /* Chuyen mode IR */
                $('#btn_ir').click(function(){  //IR
                    both_ir_depth_btn_press = 'ir';
                    mode_zoom = 'btn_video_2';//fullscreen -> my2  
                    $('#slider_zoom_ss,#number_zoom_ss').val(100);                     
                    slider_zoom();           
                    try {
                        stopTimeout();   
                        stopTimeout_mode_ir(); 
                        $('#scale_zoom_ir').remove();
                        $('#hang1,#hang2,.img-comp-slider').remove();
                        $('.control_bar').removeAttr('style');                                                                  
                    }
                    catch(err) {    
                        console.log(err)                                 
                    }  
                    $('#btn_ir').removeAttr('style').css('background-color','#A3D272').attr('disabled','disabled');
                    $('#btn_depth').removeAttr('style').removeAttr('disabled');
                    $('#divide_screen').removeAttr('style').removeAttr('disabled');

                    $('#divide_screen').show();
                    /* Xoa va tao lai the my1 va my gan zoom cho my2 */
                    refresh_video_feed_2();                                
                    elem = document.getElementById('my2')                        

                    /* Thanh dieu chinh sang cho ve 0 */
                    var set = document.getElementById('set');
                    set.click();      

                    /* Tao lai gai tri hien thi % Zoom */
                    $('#scale_zoom_s').remove();
                    var add_zoom_ir = document.createElement('div');
                    add_zoom_ir.setAttribute("id",'scale_zoom_s');
                    add_zoom_ir.setAttribute("class",'scale_zoom');
                    add_zoom_ir.innerHTML = 100 + '%';                 
                    document.getElementById("my2").appendChild(add_zoom_ir);
                    startTimeout();
                    
                    setTimeout(function(){
                        $('#my_video_2').attr('src','../static/ready.jpg');
                    },1000)
                    /* Dieu chinh vi tri control_bar trong phan extend mode */
                    if(show_snap_view){
                        $('#divide_screen').hide(); 
                        $('#control_bar_s').css('left','3');
                        $('.iv-snap-view').css('left','0');                                     
                    }                     
                                          
                })                              

                /* Mo rong hien thi song song 2 mode*/
                $('#extend_mode').click(function(){                                  
                    if($('.mode').val() == "DEPTHIR"){
                        $('#tool').removeAttr('style');
                        show_snap_view = true;
                        mode_zoom = 'btn_video';   
                                                
                        $('.fra_btn_depthir').hide();
                        $('#ctrl').show();
                        

                        $(this).css('display','none');                        
                        $('#frame_extend_seclect_color,#return_to_main,#title_ir_image,#title_depth_image,#title_icon_return').show();
                      
                        /* Thay doi gia tri CSS cua cac phan tu khi chuyen sang hien thi song song 2 mode */                                 
                        $('.fra_btn_depthir').css('top','40');
                        $('#my').css('width','1280px');
                        $('.main-container').css('width','1290px');
                        /*tool*/
                        $('.title_control').css('display','none');
                        $('.banner').css('width','1290px');
                        $('.title_video').css('width','1280px').css('margin-bottom','30px');
                        $('#recorder').css('margin-right','5px').css('margin-top','-10px');
                        $('#frame_title_video').css('margin-top','60px');
                        $('#btn_ir').removeAttr('disabled');
                        $('#btn_depth').removeAttr('disabled');                                                
                        $('.cpu').css('background','#B1E1EF').css('width','1280px');
                        $('.rightness').css('margin-top','0');
                        $('#fra_slider_zoom').css('margin-top','30px').css('float','none');
                        $('#fra_btn_download').css('margin-left','-25px');  
                        $('.test_box').css('width','230px');
                        $('.mode_ir_depth').css('width','270px');    
                        $('.frame_apply').css('margin-top','-10px'); 
                        /**/
                        /**/
                        var xx = document.getElementById("tool");     
                        document.getElementById("ctrl").appendChild(xx);    
                        $('#tool').css('position','absolute').css('z-index','100').css('background','#fff').css('right','30').css('box-shadow','0px 0px 30px 0px rgba(0,0,0,0.3)').css('padding-left','4px').css('border','2px solid #A2D171').css('height','515px');
                        $('.frame_apply').css('margin-right','15px');
                        $('#html').css('margin-left','207px').css('margin-top','-32px');
                        //$('#tool').css('position','absolute').css('z-index','100').css('background','#fff').css('right','30').css('box-shadow','0px 0px 30px 0px rgba(0,0,0,0.3)');
                        //$('#tool').css('display', 'none');
                        /* Tra lai value Colormap */
                        var color_option = $('.seclect_color').val();
                        if(color_option == 'AUTUMN'){
                            $('option[value=' + color_option + ']').attr('selected', true);
                        }else if(color_option == 'HOT'){
                            $('option[value=' + color_option + ']').attr('selected', true);
                        }else if(color_option == 'SPRING'){
                            $('option[value=' + color_option + ']').attr('selected', true);
                        }else{
                            $('option[value=' + color_option + ']').attr('selected', true);
                        }          
                        document.getElementById("btn_depth").click();              
                    }else{
                        /* Thong bao chi su dung expend mode trong che do DEPTHIR */
                        var lang = $('.language').val()
                        if(lang == 'en')
                            alert('Switch to DEPTHIR mode to perform this function !')
                        else if(lang == 'vn')
                            alert('Chuyển sang chế độ DEPTHIR để thực hiện chức năng này !')        
                        else
                            alert('この機能を実行するには、DEPTHIRモードに切り替えます !')                
                    }   
                    $('.update_params').mouseenter();                  
                })                      

                /* Tu giao dien xem song song 2 mode chuyen ve lai giao dien co Control Panel */
                $('#return_to_main,#title_icon_return').click(function(){
                    if(!disabled_btn_return){
                        $('#tool').removeAttr('style');
                        var xx = document.getElementById("tool");     
                        document.getElementById("main-video-ss").appendChild(xx);   
                        $('#tool').css('display','block');   
                        show_snap_view = false;
                        $('#return_to_main').hide();
                        $('#title_icon_return').hide();
                        $('#ctrl').hide();
                        $('.iv-snap-view-ss').removeAttr('style');
                        /* Clear Zoom IR */
                        stopTimeout_mode_ir();                   
                        $('.control_bar_ir').hide();  
                        $('#frame_extend_seclect_color,#title_ir_image,#title_depth_image').hide(); 
                        $('#extend_mode,.fra_btn_depthir').show(); 

                        /* Gan lai phan fullscreen cho my1 */
                        mode_zoom = 'btn_video';
                        elem = document.getElementById('my1');                                                     
                        $('#my,.main-container,.title_control,.banner,.title_video,#recorder,#frame_title_video,.fra_btn_depthir,.cpu,#control_bar_s,.control_bar,.iv-snap-view,.frame_apply,#html,.test_box,.mode_ir_depth,.frame_apply').removeAttr('style');     
                        $('.rightness').css('margin-top','7px');             
                        $('#btn_ir').removeAttr('disabled');
                        $('#btn_depth').removeAttr('disabled');  
                        if(!toIRorDEPTH){
                            $('#divide_screen').removeAttr('disabled').click();  
                        }else{
                            toIRorDEPTH = false;
                        }                                                               
                                              
                        $('#fra_btn_download').css('margin-left','0px')
                        /* Tra lai value Colormap */
                        var color_option = $('#extend_seclect_color').val();
                        if(color_option == 'AUTUMN'){
                            $('option[value=' + color_option + ']').attr('selected', true);
                        }else if(color_option == 'HOT'){
                            $('option[value=' + color_option + ']').attr('selected', true);
                        }else if(color_option == 'SPRING'){
                            $('option[value=' + color_option + ']').attr('selected', true);
                        }else{
                            $('option[value=' + color_option + ']').attr('selected', true);
                        } 
                        $('.update_params').mouseenter();                       
                    }
                })

                /* Load param color khi hien thi che do xem song song 2 mode mo rong */
                $('#extend_seclect_color').change(function() {     
                    $('option[value=' + $('#extend_seclect_color').val() + ']').prop('selected', true);
                    $.ajax({
                        data : {
                            color :  $('#extend_seclect_color').val(),
                            user_name : user,
                        },
                        type : 'POST',
                        url : '/load_color',     
                    }).done(function(data) {                        
                        //load_colors = data.data['load_colors'];                                                           
                    })
                })
                
            })
            
        </script>
    <!-- End Display two mode --> 
   
</body>
</html>